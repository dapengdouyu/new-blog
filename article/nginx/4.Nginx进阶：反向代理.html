<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx进阶：反向代理 | 我的博客</title>
    <meta name="description" content="学习Nginx反向代理配置，实现负载均衡和请求转发">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.BFQAq9I3.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.BFQ6gudH.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CCr6Ddds.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DI6M9D4h.js">
    <link rel="modulepreload" href="/assets/article_nginx_4.Nginx进阶：反向代理.md.Bv842Mzy.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-2cc7c178><!--[--><!--]--><!--[--><span tabindex="-1" data-v-2d5ce6a5></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-2d5ce6a5>Skip to content</a><!--]--><!----><header class="VPNav" data-v-2cc7c178 data-v-9f098ce6><div class="VPNavBar" data-v-9f098ce6 data-v-c6c7ed03><div class="wrapper" data-v-c6c7ed03><div class="container" data-v-c6c7ed03><div class="title" data-v-c6c7ed03><div class="VPNavBarTitle has-sidebar" data-v-c6c7ed03 data-v-7b44b691><a class="title" href="/" data-v-7b44b691><!--[--><!--]--><!----><span data-v-7b44b691>我的博客</span><!--[--><!--]--></a></div></div><div class="content" data-v-c6c7ed03><div class="content-body" data-v-c6c7ed03><!--[--><!--]--><div class="VPNavBarSearch search" data-v-c6c7ed03><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-c6c7ed03 data-v-b14d23ba><span id="main-nav-aria-label" class="visually-hidden" data-v-b14d23ba> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/article/" tabindex="0" data-v-b14d23ba data-v-5c83f659><!--[--><span data-v-5c83f659>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-b14d23ba data-v-67fb2a59><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-67fb2a59><span class="text" data-v-67fb2a59><!----><span data-v-67fb2a59>Go语言</span><span class="vpi-chevron-down text-icon" data-v-67fb2a59></span></span></button><div class="menu" data-v-67fb2a59><div class="VPMenu" data-v-67fb2a59 data-v-4bd283c0><div class="items" data-v-4bd283c0><!--[--><!--[--><div class="VPMenuLink" data-v-4bd283c0 data-v-49c44694><a class="VPLink link" href="/article/golang/core/" data-v-49c44694><!--[--><span data-v-49c44694>核心教程</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4bd283c0 data-v-49c44694><a class="VPLink link" href="/article/golang/gin/" data-v-49c44694><!--[--><span data-v-49c44694>Gin框架</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4bd283c0 data-v-49c44694><a class="VPLink link" href="/article/golang/gorm/" data-v-49c44694><!--[--><span data-v-49c44694>GORM</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4bd283c0 data-v-49c44694><a class="VPLink link" href="/article/golang/kratos/" data-v-49c44694><!--[--><span data-v-49c44694>Kratos</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-4bd283c0 data-v-49c44694><a class="VPLink link" href="/article/golang/wasm/" data-v-49c44694><!--[--><span data-v-49c44694>WebAssembly</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/article/kafka/" tabindex="0" data-v-b14d23ba data-v-5c83f659><!--[--><span data-v-5c83f659>Kafka</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/article/network/" tabindex="0" data-v-b14d23ba data-v-5c83f659><!--[--><span data-v-5c83f659>网络</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/article/nginx/" tabindex="0" data-v-b14d23ba data-v-5c83f659><!--[--><span data-v-5c83f659>Nginx</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/article/python/" tabindex="0" data-v-b14d23ba data-v-5c83f659><!--[--><span data-v-5c83f659>Python</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/article/question/" tabindex="0" data-v-b14d23ba data-v-5c83f659><!--[--><span data-v-5c83f659>日常问题</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-c6c7ed03 data-v-a502a99d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-a502a99d data-v-4ca8fb14 data-v-80776db8><span class="check" data-v-80776db8><span class="icon" data-v-80776db8><!--[--><span class="vpi-sun sun" data-v-4ca8fb14></span><span class="vpi-moon moon" data-v-4ca8fb14></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-c6c7ed03 data-v-84b97559 data-v-67fb2a59><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-67fb2a59><span class="vpi-more-horizontal icon" data-v-67fb2a59></span></button><div class="menu" data-v-67fb2a59><div class="VPMenu" data-v-67fb2a59 data-v-4bd283c0><!----><!--[--><!--[--><!----><div class="group" data-v-84b97559><div class="item appearance" data-v-84b97559><p class="label" data-v-84b97559>Appearance</p><div class="appearance-action" data-v-84b97559><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-84b97559 data-v-4ca8fb14 data-v-80776db8><span class="check" data-v-80776db8><span class="icon" data-v-80776db8><!--[--><span class="vpi-sun sun" data-v-4ca8fb14></span><span class="vpi-moon moon" data-v-4ca8fb14></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-c6c7ed03 data-v-ad82da4d><span class="container" data-v-ad82da4d><span class="top" data-v-ad82da4d></span><span class="middle" data-v-ad82da4d></span><span class="bottom" data-v-ad82da4d></span></span></button></div></div></div></div><div class="divider" data-v-c6c7ed03><div class="divider-line" data-v-c6c7ed03></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-2cc7c178 data-v-7ba30c2e><div class="container" data-v-7ba30c2e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-7ba30c2e><span class="vpi-align-left menu-icon" data-v-7ba30c2e></span><span class="menu-text" data-v-7ba30c2e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-7ba30c2e data-v-798b75df><button data-v-798b75df>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-2cc7c178 data-v-2bec2de2><div class="curtain" data-v-2bec2de2></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-2bec2de2><span class="visually-hidden" id="sidebar-aria-label" data-v-2bec2de2> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a6dfd233><section class="VPSidebarItem level-0 is-link has-active" data-v-a6dfd233 data-v-d91b19f1><div class="item" tabindex="0" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/" data-v-d91b19f1><!--[--><h2 class="text" data-v-d91b19f1>Nginx教程</h2><!--]--></a><!----></div><div class="items" data-v-d91b19f1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/1.Nginx%E5%85%A5%E9%97%A8%EF%BC%9A%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>1.Nginx入门：快速开始</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/2.Nginx%E5%9F%BA%E7%A1%80%EF%BC%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>2.Nginx基础：配置文件详解</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/3.Nginx%E5%9F%BA%E7%A1%80%EF%BC%9A%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>3.Nginx基础：虚拟主机配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/4.Nginx%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>4.Nginx进阶：反向代理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/5.Nginx%E8%BF%9B%E9%98%B6%EF%BC%9A%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>5.Nginx进阶：静态资源服务</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/6.Nginx%E8%BF%9B%E9%98%B6%EF%BC%9ASSL-TLS%E9%85%8D%E7%BD%AE.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>6.Nginx进阶：SSL-TLS配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/7.Nginx%E9%AB%98%E7%BA%A7%EF%BC%9A%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>7.Nginx高级：日志管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/8.Nginx%E9%AB%98%E7%BA%A7%EF%BC%9A%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>8.Nginx高级：性能优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/9.Nginx%E9%AB%98%E7%BA%A7%EF%BC%9A%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>9.Nginx高级：安全配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-d91b19f1 data-v-d91b19f1><div class="item" data-v-d91b19f1><div class="indicator" data-v-d91b19f1></div><a class="VPLink link link" href="/article/nginx/10.Nginx%E5%AE%9E%E8%B7%B5%EF%BC%9A%E5%B8%B8%E8%A7%81%E5%9C%BA%E6%99%AF%E9%85%8D%E7%BD%AE.html" data-v-d91b19f1><!--[--><p class="text" data-v-d91b19f1>10.Nginx实践：常见场景配置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-2cc7c178 data-v-0dfa13eb><div class="VPDoc has-sidebar has-aside" data-v-0dfa13eb data-v-53fb7e34><!--[--><!--]--><div class="container" data-v-53fb7e34><div class="aside" data-v-53fb7e34><div class="aside-curtain" data-v-53fb7e34></div><div class="aside-container" data-v-53fb7e34><div class="aside-content" data-v-53fb7e34><div class="VPDocAside" data-v-53fb7e34 data-v-7fe19af9><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-7fe19af9 data-v-54a2a90c><div class="content" data-v-54a2a90c><div class="outline-marker" data-v-54a2a90c></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-54a2a90c>On this page</div><ul class="VPDocOutlineItem root" data-v-54a2a90c data-v-4f615f1e><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-7fe19af9></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-53fb7e34><div class="content-container" data-v-53fb7e34><!--[--><!--[--><!--[--><div class="vp-nolebase-breadcrumbs" data-v-5cfdb222><!--[--><!--]--></div><!--]--><!--]--><!--]--><main class="main" data-v-53fb7e34><div style="position:relative;" class="vp-doc _article_nginx_4_Nginx%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86" data-v-53fb7e34><div><h1 id="nginx进阶-反向代理" tabindex="-1">Nginx进阶：反向代理 <a class="header-anchor" href="#nginx进阶-反向代理" aria-label="Permalink to &quot;Nginx进阶：反向代理&quot;">​</a></h1><h2 id="一、什么是反向代理" tabindex="-1">一、什么是反向代理 <a class="header-anchor" href="#一、什么是反向代理" aria-label="Permalink to &quot;一、什么是反向代理&quot;">​</a></h2><h3 id="_1-1-正向代理-vs-反向代理" tabindex="-1">1.1 正向代理 vs 反向代理 <a class="header-anchor" href="#_1-1-正向代理-vs-反向代理" aria-label="Permalink to &quot;1.1 正向代理 vs 反向代理&quot;">​</a></h3><p><strong>正向代理（Forward Proxy）</strong>：</p><ul><li>代理客户端</li><li>客户端知道代理服务器的存在</li><li>用于访问被限制的资源（如科学上网）</li></ul><p><strong>反向代理（Reverse Proxy）</strong>：</p><ul><li>代理服务器端</li><li>客户端不知道后端服务器的存在</li><li>用于负载均衡、隐藏服务器、SSL终端等</li></ul><h3 id="_1-2-反向代理的优势" tabindex="-1">1.2 反向代理的优势 <a class="header-anchor" href="#_1-2-反向代理的优势" aria-label="Permalink to &quot;1.2 反向代理的优势&quot;">​</a></h3><ol><li><strong>负载均衡</strong>：将请求分发到多个后端服务器</li><li><strong>隐藏后端</strong>：客户端不知道真实的后端服务器</li><li><strong>SSL终端</strong>：在Nginx处理HTTPS，减轻后端压力</li><li><strong>缓存</strong>：可以缓存后端响应</li><li><strong>安全</strong>：作为防火墙，保护后端服务器</li></ol><h3 id="_1-3-反向代理的应用场景" tabindex="-1">1.3 反向代理的应用场景 <a class="header-anchor" href="#_1-3-反向代理的应用场景" aria-label="Permalink to &quot;1.3 反向代理的应用场景&quot;">​</a></h3><ul><li>前后端分离项目</li><li>微服务架构</li><li>负载均衡</li><li>API网关</li><li>静态资源CDN</li></ul><h2 id="二、基本反向代理配置" tabindex="-1">二、基本反向代理配置 <a class="header-anchor" href="#二、基本反向代理配置" aria-label="Permalink to &quot;二、基本反向代理配置&quot;">​</a></h2><h3 id="_2-1-proxy-pass指令" tabindex="-1">2.1 proxy_pass指令 <a class="header-anchor" href="#_2-1-proxy-pass指令" aria-label="Permalink to &quot;2.1 proxy_pass指令&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 反向代理到后端服务器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-2-完整的反向代理配置" tabindex="-1">2.2 完整的反向代理配置 <a class="header-anchor" href="#_2-2-完整的反向代理配置" aria-label="Permalink to &quot;2.2 完整的反向代理配置&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 后端服务器地址</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 请求头设置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 超时设置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_connect_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_send_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_read_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 缓冲设置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_buffering </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_buffer_size </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_buffers </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="三、代理请求头配置" tabindex="-1">三、代理请求头配置 <a class="header-anchor" href="#三、代理请求头配置" aria-label="Permalink to &quot;三、代理请求头配置&quot;">​</a></h2><h3 id="_3-1-常用请求头" tabindex="-1">3.1 常用请求头 <a class="header-anchor" href="#_3-1-常用请求头" aria-label="Permalink to &quot;3.1 常用请求头&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 传递原始Host头</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 传递客户端真实IP</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 传递代理链中的IP</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 传递原始协议（http/https）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 传递原始请求URI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Original-URI $request_uri;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_3-2-请求头说明" tabindex="-1">3.2 请求头说明 <a class="header-anchor" href="#_3-2-请求头说明" aria-label="Permalink to &quot;3.2 请求头说明&quot;">​</a></h3><ul><li><strong>Host</strong>: 原始请求的Host头</li><li><strong>X-Real-IP</strong>: 客户端真实IP地址</li><li><strong>X-Forwarded-For</strong>: 代理链中的所有IP地址</li><li><strong>X-Forwarded-Proto</strong>: 原始请求的协议（http/https）</li><li><strong>X-Forwarded-Host</strong>: 原始请求的Host</li></ul><h3 id="_3-3-清除请求头" tabindex="-1">3.3 清除请求头 <a class="header-anchor" href="#_3-3-清除请求头" aria-label="Permalink to &quot;3.3 清除请求头&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 清除某个请求头</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Custom-Header </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="四、负载均衡" tabindex="-1">四、负载均衡 <a class="header-anchor" href="#四、负载均衡" aria-label="Permalink to &quot;四、负载均衡&quot;">​</a></h2><h3 id="_4-1-upstream配置" tabindex="-1">4.1 upstream配置 <a class="header-anchor" href="#_4-1-upstream配置" aria-label="Permalink to &quot;4.1 upstream配置&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 定义上游服务器组</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3002;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://backend;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_4-2-负载均衡算法" tabindex="-1">4.2 负载均衡算法 <a class="header-anchor" href="#_4-2-负载均衡算法" aria-label="Permalink to &quot;4.2 负载均衡算法&quot;">​</a></h3><h4 id="轮询-round-robin-默认" tabindex="-1">轮询（Round Robin，默认） <a class="header-anchor" href="#轮询-round-robin-默认" aria-label="Permalink to &quot;轮询（Round Robin，默认）&quot;">​</a></h4><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3002;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="加权轮询-weighted-round-robin" tabindex="-1">加权轮询（Weighted Round Robin） <a class="header-anchor" href="#加权轮询-weighted-round-robin" aria-label="Permalink to &quot;加权轮询（Weighted Round Robin）&quot;">​</a></h4><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000 </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 权重3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    server 127.0.0.1:3001 </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 权重2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    server 127.0.0.1:3002 </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">weight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 权重1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="ip哈希-ip-hash" tabindex="-1">IP哈希（IP Hash） <a class="header-anchor" href="#ip哈希-ip-hash" aria-label="Permalink to &quot;IP哈希（IP Hash）&quot;">​</a></h4><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ip_hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 基于客户端IP的哈希</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3002;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="最少连接-least-connections" tabindex="-1">最少连接（Least Connections） <a class="header-anchor" href="#最少连接-least-connections" aria-label="Permalink to &quot;最少连接（Least Connections）&quot;">​</a></h4><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    least_conn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 选择连接数最少的服务器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3002;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-3-服务器状态" tabindex="-1">4.3 服务器状态 <a class="header-anchor" href="#_4-3-服务器状态" aria-label="Permalink to &quot;4.3 服务器状态&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001 backup;      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 备份服务器</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3002 down;       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 暂时不可用</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3003 </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_fails</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fail_timeout=30s;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 失败3次后暂停30秒</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-4-健康检查-需要第三方模块" tabindex="-1">4.4 健康检查（需要第三方模块） <a class="header-anchor" href="#_4-4-健康检查-需要第三方模块" aria-label="Permalink to &quot;4.4 健康检查（需要第三方模块）&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 需要nginx_upstream_check_module模块</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    check</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interval=3000 rise=2 fall=3 timeout=1000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="五、代理缓冲和超时" tabindex="-1">五、代理缓冲和超时 <a class="header-anchor" href="#五、代理缓冲和超时" aria-label="Permalink to &quot;五、代理缓冲和超时&quot;">​</a></h2><h3 id="_5-1-缓冲配置" tabindex="-1">5.1 缓冲配置 <a class="header-anchor" href="#_5-1-缓冲配置" aria-label="Permalink to &quot;5.1 缓冲配置&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 启用缓冲</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_buffering </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 缓冲区大小</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_buffer_size </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_buffers </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_busy_buffers_size </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 临时文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_temp_file_write_size </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_max_temp_file_size </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 0表示禁用临时文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_5-2-超时配置" tabindex="-1">5.2 超时配置 <a class="header-anchor" href="#_5-2-超时配置" aria-label="Permalink to &quot;5.2 超时配置&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 连接超时</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_connect_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 发送超时</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_send_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 读取超时</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_read_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_5-3-禁用缓冲" tabindex="-1">5.3 禁用缓冲 <a class="header-anchor" href="#_5-3-禁用缓冲" aria-label="Permalink to &quot;5.3 禁用缓冲&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 禁用缓冲（适用于实时流、SSE等）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_buffering </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">off</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_cache </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">off</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="六、websocket代理" tabindex="-1">六、WebSocket代理 <a class="header-anchor" href="#六、websocket代理" aria-label="Permalink to &quot;六、WebSocket代理&quot;">​</a></h2><h3 id="_6-1-websocket配置" tabindex="-1">6.1 WebSocket配置 <a class="header-anchor" href="#_6-1-websocket配置" aria-label="Permalink to &quot;6.1 WebSocket配置&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /ws </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # WebSocket必需的头</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_http_version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Upgrade $http_upgrade;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Connection </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;upgrade&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 其他请求头</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # WebSocket超时设置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_read_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">86400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 24小时</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_6-2-websocket负载均衡" tabindex="-1">6.2 WebSocket负载均衡 <a class="header-anchor" href="#_6-2-websocket负载均衡" aria-label="Permalink to &quot;6.2 WebSocket负载均衡&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> websocket_backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ip_hash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># WebSocket需要保持连接，使用ip_hash</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /ws </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://websocket_backend;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_http_version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Upgrade $http_upgrade;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Connection </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;upgrade&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="七、实际应用场景" tabindex="-1">七、实际应用场景 <a class="header-anchor" href="#七、实际应用场景" aria-label="Permalink to &quot;七、实际应用场景&quot;">​</a></h2><h3 id="_7-1-前后端分离项目" tabindex="-1">7.1 前后端分离项目 <a class="header-anchor" href="#_7-1-前后端分离项目" aria-label="Permalink to &quot;7.1 前后端分离项目&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example.com;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/var/www/frontend;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 前端静态文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try_files </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$uri $uri/ /index.html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # API代理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # WebSocket代理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /ws </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_http_version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Upgrade $http_upgrade;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Connection </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;upgrade&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_7-2-node-js应用代理" tabindex="-1">7.2 Node.js应用代理 <a class="header-anchor" href="#_7-2-node-js应用代理" aria-label="Permalink to &quot;7.2 Node.js应用代理&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> nodejs_backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api.example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://nodejs_backend;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_7-3-python应用代理-uwsgi-fastcgi" tabindex="-1">7.3 Python应用代理（uWSGI/FastCGI） <a class="header-anchor" href="#_7-3-python应用代理-uwsgi-fastcgi" aria-label="Permalink to &quot;7.3 Python应用代理（uWSGI/FastCGI）&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> python_backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:8000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:8001;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://python_backend;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_7-4-微服务api网关" tabindex="-1">7.4 微服务API网关 <a class="header-anchor" href="#_7-4-微服务api网关" aria-label="Permalink to &quot;7.4 微服务API网关&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 用户服务</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> user_service </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3002;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 订单服务</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> order_service </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:4001;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:4002;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api.example.com;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 用户服务</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api/users </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://user_service;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 订单服务</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api/orders </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://order_service;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="八、代理重定向处理" tabindex="-1">八、代理重定向处理 <a class="header-anchor" href="#八、代理重定向处理" aria-label="Permalink to &quot;八、代理重定向处理&quot;">​</a></h2><h3 id="_8-1-处理后端重定向" tabindex="-1">8.1 处理后端重定向 <a class="header-anchor" href="#_8-1-处理后端重定向" aria-label="Permalink to &quot;8.1 处理后端重定向&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 处理重定向</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_redirect </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">off</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 或</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_redirect </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000/ http://example.com/;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_8-2-重写location头" tabindex="-1">8.2 重写Location头 <a class="header-anchor" href="#_8-2-重写location头" aria-label="Permalink to &quot;8.2 重写Location头&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 重写Location头中的域名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_redirect </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000/ http://example.com/;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_redirect </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://backend.internal/ http://example.com/;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="九、错误处理" tabindex="-1">九、错误处理 <a class="header-anchor" href="#九、错误处理" aria-label="Permalink to &quot;九、错误处理&quot;">​</a></h2><h3 id="_9-1-代理错误页面" tabindex="-1">9.1 代理错误页面 <a class="header-anchor" href="#_9-1-代理错误页面" aria-label="Permalink to &quot;9.1 代理错误页面&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 错误处理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_intercept_errors </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    error_page </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">502</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 503</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 504</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /50x.html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;"> /50x.html </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/var/www/html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_9-2-后端服务器故障处理" tabindex="-1">9.2 后端服务器故障处理 <a class="header-anchor" href="#_9-2-后端服务器故障处理" aria-label="Permalink to &quot;9.2 后端服务器故障处理&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000 </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">max_fails</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fail_timeout=30s;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3001 backup;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 备份服务器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://backend;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_next_upstream </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timeout http_502 http_503;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_next_upstream_tries </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_next_upstream_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="十、性能优化" tabindex="-1">十、性能优化 <a class="header-anchor" href="#十、性能优化" aria-label="Permalink to &quot;十、性能优化&quot;">​</a></h2><h3 id="_10-1-连接复用" tabindex="-1">10.1 连接复用 <a class="header-anchor" href="#_10-1-连接复用" aria-label="Permalink to &quot;10.1 连接复用&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    keepalive </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 保持32个连接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://backend;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_http_version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Connection </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_10-2-压缩响应" tabindex="-1">10.2 压缩响应 <a class="header-anchor" href="#_10-2-压缩响应" aria-label="Permalink to &quot;10.2 压缩响应&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 启用压缩</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    gzip </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    gzip_proxied </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">any;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    gzip_types </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text/plain text/css application/json;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="十一、下一步学习" tabindex="-1">十一、下一步学习 <a class="header-anchor" href="#十一、下一步学习" aria-label="Permalink to &quot;十一、下一步学习&quot;">​</a></h2><p>完成本课后，你应该能够：</p><ul><li>✅ 理解反向代理的概念和优势</li><li>✅ 配置基本的反向代理</li><li>✅ 配置负载均衡（轮询、加权、IP哈希等）</li><li>✅ 配置WebSocket代理</li><li>✅ 处理代理请求头和响应</li><li>✅ 优化代理性能</li></ul><p>接下来可以学习：</p><ol><li><strong>第5课：静态资源服务</strong> - 学习如何优化静态文件服务</li><li><strong>第6课：SSL/TLS配置</strong> - 学习如何配置HTTPS</li></ol><h2 id="十二、总结" tabindex="-1">十二、总结 <a class="header-anchor" href="#十二、总结" aria-label="Permalink to &quot;十二、总结&quot;">​</a></h2><ul><li>反向代理用于代理服务器端，隐藏后端服务器</li><li>使用proxy_pass指令配置反向代理</li><li>upstream块用于定义后端服务器组和负载均衡</li><li>负载均衡算法包括：轮询、加权轮询、IP哈希、最少连接</li><li>WebSocket代理需要特殊的请求头配置</li><li>合理配置缓冲和超时可以提高性能</li></ul><p>掌握反向代理配置后，你就可以构建高可用的Web应用架构了！</p></div></div></main><footer class="VPDocFooter" data-v-53fb7e34 data-v-c19e2a97><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-c19e2a97><span class="visually-hidden" id="doc-footer-aria-label" data-v-c19e2a97>Pager</span><div class="pager" data-v-c19e2a97><a class="VPLink link pager-link prev" href="/article/nginx/3.Nginx%E5%9F%BA%E7%A1%80%EF%BC%9A%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE.html" data-v-c19e2a97><!--[--><span class="desc" data-v-c19e2a97>Previous page</span><span class="title" data-v-c19e2a97>3.Nginx基础：虚拟主机配置</span><!--]--></a></div><div class="pager" data-v-c19e2a97><a class="VPLink link pager-link next" href="/article/nginx/5.Nginx%E8%BF%9B%E9%98%B6%EF%BC%9A%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1.html" data-v-c19e2a97><!--[--><span class="desc" data-v-c19e2a97>Next page</span><span class="title" data-v-c19e2a97>5.Nginx进阶：静态资源服务</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"article_golang_core_1.go语言入门：环境安装与配置.md\":\"D_-09PR8\",\"article_golang_core_10.go语言实践：包管理.md\":\"D-aISDij\",\"article_golang_core_11.go语言实践：错误处理.md\":\"DE5tQe82\",\"article_golang_core_12.go语言高级：接口.md\":\"BJu1hu0g\",\"article_golang_core_13.1.go语言高级：gmp调度模型.md\":\"BtJIQ_le\",\"article_golang_core_13.go语言高级：并发基础.md\":\"CCAUSBg0\",\"article_golang_core_14.go语言高级：channel通信.md\":\"Ccb7nWDH\",\"article_golang_core_15.go语言高级：并发控制.md\":\"D7oyns7v\",\"article_golang_core_16.go语言高级：并发模式与安全.md\":\"D04sGfCh\",\"article_golang_core_17.go语言高级：高级并发.md\":\"BTYawpz3\",\"article_golang_core_18.go语言高级：反射.md\":\"Dw1OHHed\",\"article_golang_core_2.go语言入门：基础语法与变量常量.md\":\"DpFA3YKf\",\"article_golang_core_3.go语言基础：数据类型与类型转换.md\":\"B6Qg2665\",\"article_golang_core_4.go语言基础：运算符与位运算.md\":\"s7ll_rrh\",\"article_golang_core_5.go语言基础：指针.md\":\"D2HbdWa7\",\"article_golang_core_6.go语言基础：字符串、数组与切片.md\":\"UWsboGww\",\"article_golang_core_7.go语言基础：控制流.md\":\"D-zxvj2x\",\"article_golang_core_8.go语言基础：函数.md\":\"BG4KW8Qy\",\"article_golang_core_9.go语言进阶：复合类型与结构体.md\":\"D-w0HqCz\",\"article_golang_core_index.md\":\"DxvyMh7F\",\"article_golang_gin_1.gin入门：快速开始.md\":\"DRRzbJXI\",\"article_golang_gin_2.gin基础：请求与响应.md\":\"CyOZIfJB\",\"article_golang_gin_3.gin进阶：中间件与路由组.md\":\"C8yuRJpm\",\"article_golang_gin_4.gin实践：数据绑定与验证.md\":\"DzvJz4YZ\",\"article_golang_gin_5.gin高级：项目结构与最佳实践.md\":\"pEWuP32a\",\"article_golang_gin_index.md\":\"nEHLifUi\",\"article_golang_gorm_1.gorm入门：快速开始.md\":\"CQPx8bQw\",\"article_golang_gorm_2.gorm基础：模型定义.md\":\"CTefR-YQ\",\"article_golang_gorm_3.gorm基础：crud操作.md\":\"CxtuM3eJ\",\"article_golang_gorm_4.gorm进阶：查询和条件.md\":\"SKNMW3ni\",\"article_golang_gorm_5.gorm进阶：关联和预加载.md\":\"mv-Bm_KC\",\"article_golang_gorm_6.gorm高级：事务处理.md\":\"DNcYD875\",\"article_golang_gorm_7.gorm高级：钩子函数.md\":\"B4jX3ud-\",\"article_golang_gorm_8.gorm精通：高级特性.md\":\"CMY0uToS\",\"article_golang_gorm_9.gorm实践：最佳实践和项目结构.md\":\"B5F3odta\",\"article_golang_gorm_index.md\":\"onPDfih9\",\"article_golang_index.md\":\"C9Xm6SVR\",\"article_golang_kratos_1.kratos入门：快速开始.md\":\"Cf5hoT1U\",\"article_golang_kratos_2.kratos基础：http服务.md\":\"Cs2RN-XA\",\"article_golang_kratos_3.kratos进阶：数据访问层.md\":\"Chn8grhH\",\"article_golang_kratos_4.kratos实践：业务逻辑层.md\":\"Bn0CIVKk\",\"article_golang_kratos_5.kratos高级：微服务架构.md\":\"DHsRc6BY\",\"article_golang_kratos_index.md\":\"CYzWHvth\",\"article_golang_wasm_1.webassembly入门：快速开始.md\":\"qJuhb8Uk\",\"article_golang_wasm_2.webassembly基础：go与javascript交互.md\":\"BrUF0LHR\",\"article_golang_wasm_3.webassembly进阶：dom操作.md\":\"BRH0y8Lm\",\"article_golang_wasm_4.webassembly实践：构建web应用.md\":\"D_0UUcwg\",\"article_golang_wasm_5.webassembly高级：性能优化和最佳实践.md\":\"Cni3JpYR\",\"article_golang_wasm_index.md\":\"DMfK2Xc5\",\"article_index.md\":\"ZNXVtaE7\",\"article_kafka_1.kafka入门：快速开始.md\":\"C4F2ewCH\",\"article_kafka_11.kafka实践：node.js和go客户端开发.md\":\"Be2kk7wW\",\"article_kafka_2.kafka基础：核心概念.md\":\"DNqvfSJr\",\"article_kafka_index.md\":\"DvaEJyuQ\",\"article_network_1.ip地址基础.md\":\"Dt8S5KKj\",\"article_network_2.局域网和公网ip.md\":\"Cd4_psZB\",\"article_network_3.特殊ip地址.md\":\"Chet74XS\",\"article_network_4.子网掩码和cidr.md\":\"Dw_TApWr\",\"article_network_5.dhcp动态主机配置.md\":\"B6D04Nwk\",\"article_network_6.网络配置实践.md\":\"C3KfepaN\",\"article_network_7.网络问题解答.md\":\"BC9bKjUR\",\"article_network_index.md\":\"esM-lDTP\",\"article_nginx_1.nginx入门：快速开始.md\":\"iA-4GP9e\",\"article_nginx_10.nginx实践：常见场景配置.md\":\"CDLqRVyb\",\"article_nginx_2.nginx基础：配置文件详解.md\":\"BbIH1YhF\",\"article_nginx_3.nginx基础：虚拟主机配置.md\":\"NEYPD-JZ\",\"article_nginx_4.nginx进阶：反向代理.md\":\"Bv842Mzy\",\"article_nginx_5.nginx进阶：静态资源服务.md\":\"DOy5zCfK\",\"article_nginx_6.nginx进阶：ssl-tls配置.md\":\"DKBIR0Mw\",\"article_nginx_7.nginx高级：日志管理.md\":\"DkbxoPFy\",\"article_nginx_8.nginx高级：性能优化.md\":\"CSgAM04r\",\"article_nginx_9.nginx高级：安全配置.md\":\"Cb8lJxtJ\",\"article_nginx_index.md\":\"7-8JRwQt\",\"article_python_index.md\":\"Ngk7ZEUW\",\"article_question_5笔输入法教程：从入门到精通.md\":\"Ck0vlenL\",\"article_question_git多域名ssh配置.md\":\"BeTi_3kR\",\"article_question_index.md\":\"b4Jh3FMw\",\"article_question_test-issue.md\":\"C4QpmLQl\",\"article_question_学车教程_开车小技巧_index.md\":\"VGLQ33jd\",\"article_question_技术问题_vitepress-sidebar.md\":\"B-CWRn1Q\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"我的博客\",\"description\":\"这是我的个人博客，分享技术、生活和思考\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/article/\"},{\"text\":\"Go语言\",\"items\":[{\"text\":\"核心教程\",\"link\":\"/article/golang/core/\"},{\"text\":\"Gin框架\",\"link\":\"/article/golang/gin/\"},{\"text\":\"GORM\",\"link\":\"/article/golang/gorm/\"},{\"text\":\"Kratos\",\"link\":\"/article/golang/kratos/\"},{\"text\":\"WebAssembly\",\"link\":\"/article/golang/wasm/\"}]},{\"text\":\"Kafka\",\"link\":\"/article/kafka/\"},{\"text\":\"网络\",\"link\":\"/article/network/\"},{\"text\":\"Nginx\",\"link\":\"/article/nginx/\"},{\"text\":\"Python\",\"link\":\"/article/python/\"},{\"text\":\"日常问题\",\"link\":\"/article/question/\"}],\"sidebar\":{\"/article/golang/core/\":[{\"text\":\"Go语言核心教程\",\"link\":\"/article/golang/core/\",\"items\":[{\"text\":\"1.Go语言入门：环境安装与配置\",\"link\":\"/article/golang/core/1.Go语言入门：环境安装与配置\"},{\"text\":\"2.Go语言入门：基础语法与变量常量\",\"link\":\"/article/golang/core/2.Go语言入门：基础语法与变量常量\"},{\"text\":\"3.Go语言基础：数据类型与类型转换\",\"link\":\"/article/golang/core/3.Go语言基础：数据类型与类型转换\"},{\"text\":\"4.Go语言基础：运算符与位运算\",\"link\":\"/article/golang/core/4.Go语言基础：运算符与位运算\"},{\"text\":\"5.Go语言基础：指针\",\"link\":\"/article/golang/core/5.Go语言基础：指针\"},{\"text\":\"6.Go语言基础：字符串、数组与切片\",\"link\":\"/article/golang/core/6.Go语言基础：字符串、数组与切片\"},{\"text\":\"7.Go语言基础：控制流\",\"link\":\"/article/golang/core/7.Go语言基础：控制流\"},{\"text\":\"8.Go语言基础：函数\",\"link\":\"/article/golang/core/8.Go语言基础：函数\"},{\"text\":\"9.Go语言进阶：复合类型与结构体\",\"link\":\"/article/golang/core/9.Go语言进阶：复合类型与结构体\"},{\"text\":\"10.Go语言实践：包管理\",\"link\":\"/article/golang/core/10.Go语言实践：包管理\"},{\"text\":\"11.Go语言实践：错误处理\",\"link\":\"/article/golang/core/11.Go语言实践：错误处理\"},{\"text\":\"12.Go语言高级：接口\",\"link\":\"/article/golang/core/12.Go语言高级：接口\"},{\"text\":\"13.1.Go语言高级：GMP调度模型\",\"link\":\"/article/golang/core/13.1.Go语言高级：GMP调度模型\"},{\"text\":\"13.Go语言高级：并发基础\",\"link\":\"/article/golang/core/13.Go语言高级：并发基础\"},{\"text\":\"14.Go语言高级：Channel通信\",\"link\":\"/article/golang/core/14.Go语言高级：Channel通信\"},{\"text\":\"15.Go语言高级：并发控制\",\"link\":\"/article/golang/core/15.Go语言高级：并发控制\"},{\"text\":\"16.Go语言高级：并发模式与安全\",\"link\":\"/article/golang/core/16.Go语言高级：并发模式与安全\"},{\"text\":\"17.Go语言高级：高级并发\",\"link\":\"/article/golang/core/17.Go语言高级：高级并发\"},{\"text\":\"18.Go语言高级：反射\",\"link\":\"/article/golang/core/18.Go语言高级：反射\"}]}],\"/article/golang/gin/\":[{\"text\":\"Gin框架教程\",\"link\":\"/article/golang/gin/\",\"items\":[{\"text\":\"1.Gin入门：快速开始\",\"link\":\"/article/golang/gin/1.Gin入门：快速开始\"},{\"text\":\"2.Gin基础：请求与响应\",\"link\":\"/article/golang/gin/2.Gin基础：请求与响应\"},{\"text\":\"3.Gin进阶：中间件与路由组\",\"link\":\"/article/golang/gin/3.Gin进阶：中间件与路由组\"},{\"text\":\"4.Gin实践：数据绑定与验证\",\"link\":\"/article/golang/gin/4.Gin实践：数据绑定与验证\"},{\"text\":\"5.Gin高级：项目结构与最佳实践\",\"link\":\"/article/golang/gin/5.Gin高级：项目结构与最佳实践\"}]}],\"/article/golang/gorm/\":[{\"text\":\"GORM教程\",\"link\":\"/article/golang/gorm/\",\"items\":[{\"text\":\"1.GORM入门：快速开始\",\"link\":\"/article/golang/gorm/1.GORM入门：快速开始\"},{\"text\":\"2.GORM基础：模型定义\",\"link\":\"/article/golang/gorm/2.GORM基础：模型定义\"},{\"text\":\"3.GORM基础：CRUD操作\",\"link\":\"/article/golang/gorm/3.GORM基础：CRUD操作\"},{\"text\":\"4.GORM进阶：查询和条件\",\"link\":\"/article/golang/gorm/4.GORM进阶：查询和条件\"},{\"text\":\"5.GORM进阶：关联和预加载\",\"link\":\"/article/golang/gorm/5.GORM进阶：关联和预加载\"},{\"text\":\"6.GORM高级：事务处理\",\"link\":\"/article/golang/gorm/6.GORM高级：事务处理\"},{\"text\":\"7.GORM高级：钩子函数\",\"link\":\"/article/golang/gorm/7.GORM高级：钩子函数\"},{\"text\":\"8.GORM精通：高级特性\",\"link\":\"/article/golang/gorm/8.GORM精通：高级特性\"},{\"text\":\"9.GORM实践：最佳实践和项目结构\",\"link\":\"/article/golang/gorm/9.GORM实践：最佳实践和项目结构\"}]}],\"/article/golang/kratos/\":[{\"text\":\"Kratos框架教程\",\"link\":\"/article/golang/kratos/\",\"items\":[{\"text\":\"1.Kratos入门：快速开始\",\"link\":\"/article/golang/kratos/1.Kratos入门：快速开始\"},{\"text\":\"2.Kratos基础：HTTP服务\",\"link\":\"/article/golang/kratos/2.Kratos基础：HTTP服务\"},{\"text\":\"3.Kratos进阶：数据访问层\",\"link\":\"/article/golang/kratos/3.Kratos进阶：数据访问层\"},{\"text\":\"4.Kratos实践：业务逻辑层\",\"link\":\"/article/golang/kratos/4.Kratos实践：业务逻辑层\"},{\"text\":\"5.Kratos高级：微服务架构\",\"link\":\"/article/golang/kratos/5.Kratos高级：微服务架构\"}]}],\"/article/golang/wasm/\":[{\"text\":\"WebAssembly教程\",\"link\":\"/article/golang/wasm/\",\"items\":[{\"text\":\"1.WebAssembly入门：快速开始\",\"link\":\"/article/golang/wasm/1.WebAssembly入门：快速开始\"},{\"text\":\"2.WebAssembly基础：Go与JavaScript交互\",\"link\":\"/article/golang/wasm/2.WebAssembly基础：Go与JavaScript交互\"},{\"text\":\"3.WebAssembly进阶：DOM操作\",\"link\":\"/article/golang/wasm/3.WebAssembly进阶：DOM操作\"},{\"text\":\"4.WebAssembly实践：构建Web应用\",\"link\":\"/article/golang/wasm/4.WebAssembly实践：构建Web应用\"},{\"text\":\"5.WebAssembly高级：性能优化和最佳实践\",\"link\":\"/article/golang/wasm/5.WebAssembly高级：性能优化和最佳实践\"}]}],\"/article/kafka/\":[{\"text\":\"Kafka教程\",\"link\":\"/article/kafka/\",\"items\":[{\"text\":\"1.Kafka入门：快速开始\",\"link\":\"/article/kafka/1.Kafka入门：快速开始\"},{\"text\":\"2.Kafka基础：核心概念\",\"link\":\"/article/kafka/2.Kafka基础：核心概念\"},{\"text\":\"11.Kafka实践：Node.js和Go客户端开发\",\"link\":\"/article/kafka/11.Kafka实践：Node.js和Go客户端开发\"}]}],\"/article/network/\":[{\"text\":\"网络问题\",\"link\":\"/article/network/\",\"items\":[{\"text\":\"1.IP地址基础\",\"link\":\"/article/network/1.IP地址基础\"},{\"text\":\"2.局域网和公网IP\",\"link\":\"/article/network/2.局域网和公网IP\"},{\"text\":\"3.特殊IP地址\",\"link\":\"/article/network/3.特殊IP地址\"},{\"text\":\"4.子网掩码和CIDR\",\"link\":\"/article/network/4.子网掩码和CIDR\"},{\"text\":\"5.DHCP动态主机配置\",\"link\":\"/article/network/5.DHCP动态主机配置\"},{\"text\":\"6.网络配置实践\",\"link\":\"/article/network/6.网络配置实践\"},{\"text\":\"7.网络问题解答\",\"link\":\"/article/network/7.网络问题解答\"}]}],\"/article/nginx/\":[{\"text\":\"Nginx教程\",\"link\":\"/article/nginx/\",\"items\":[{\"text\":\"1.Nginx入门：快速开始\",\"link\":\"/article/nginx/1.Nginx入门：快速开始\"},{\"text\":\"2.Nginx基础：配置文件详解\",\"link\":\"/article/nginx/2.Nginx基础：配置文件详解\"},{\"text\":\"3.Nginx基础：虚拟主机配置\",\"link\":\"/article/nginx/3.Nginx基础：虚拟主机配置\"},{\"text\":\"4.Nginx进阶：反向代理\",\"link\":\"/article/nginx/4.Nginx进阶：反向代理\"},{\"text\":\"5.Nginx进阶：静态资源服务\",\"link\":\"/article/nginx/5.Nginx进阶：静态资源服务\"},{\"text\":\"6.Nginx进阶：SSL-TLS配置\",\"link\":\"/article/nginx/6.Nginx进阶：SSL-TLS配置\"},{\"text\":\"7.Nginx高级：日志管理\",\"link\":\"/article/nginx/7.Nginx高级：日志管理\"},{\"text\":\"8.Nginx高级：性能优化\",\"link\":\"/article/nginx/8.Nginx高级：性能优化\"},{\"text\":\"9.Nginx高级：安全配置\",\"link\":\"/article/nginx/9.Nginx高级：安全配置\"},{\"text\":\"10.Nginx实践：常见场景配置\",\"link\":\"/article/nginx/10.Nginx实践：常见场景配置\"}]}],\"/article/python/\":[{\"text\":\"Python教程\",\"link\":\"/article/python/\",\"items\":[]}],\"/article/question/\":[{\"text\":\"日常问题\",\"link\":\"/article/question/\",\"items\":[{\"text\":\"git多域名ssh配置\",\"link\":\"/article/question/git多域名ssh配置\"},{\"text\":\"test-issue\",\"link\":\"/article/question/test-issue\"},{\"text\":\"5笔输入法教程：从入门到精通\",\"link\":\"/article/question/5笔输入法教程：从入门到精通\"}]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>