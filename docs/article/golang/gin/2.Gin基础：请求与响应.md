---
title: 2ã€GinåŸºç¡€ï¼šè¯·æ±‚ä¸å“åº”
date: 2026-01-06
description: æ·±å…¥ç†è§£Ginæ¡†æ¶çš„è¯·æ±‚å¤„ç†å’Œå“åº”è¿”å›æœºåˆ¶
---

# 2ã€GinåŸºç¡€ï¼šè¯·æ±‚ä¸å“åº”

æœ¬æ–‡æ¡£æ·±å…¥è®²è§£Ginæ¡†æ¶å¦‚ä½•å¤„ç†HTTPè¯·æ±‚å’Œè¿”å›å„ç§ç±»å‹çš„å“åº”ã€‚

## ğŸ¯ æœ¬è¯¾å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬è¯¾åï¼Œä½ å°†èƒ½å¤Ÿï¼š
- âœ… æŒæ¡å„ç§è¯·æ±‚å‚æ•°çš„è·å–æ–¹æ³•
- âœ… ç†è§£è¯·æ±‚å¤´ä¿¡æ¯çš„å¤„ç†
- âœ… å­¦ä¼šè¿”å›ä¸åŒç±»å‹çš„å“åº”ï¼ˆJSONã€XMLã€HTMLç­‰ï¼‰
- âœ… æŒæ¡çŠ¶æ€ç å’Œå“åº”å¤´çš„è®¾ç½®
- âœ… ç†è§£æ–‡ä»¶ä¸‹è½½å’Œæµå¼å“åº”

---

## ä¸€ã€è·å–è¯·æ±‚å‚æ•°

### 1.1 æŸ¥è¯¢å‚æ•°ï¼ˆQuery Parametersï¼‰

#### åŸºæœ¬ç”¨æ³•

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    r.GET("/search", func(c *gin.Context) {
        // è·å–å•ä¸ªæŸ¥è¯¢å‚æ•°
        keyword := c.Query("keyword")
        
        // è·å–å‚æ•°ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼
        page := c.DefaultQuery("page", "1")
        
        // æ£€æŸ¥å‚æ•°æ˜¯å¦å­˜åœ¨
        sort, exists := c.GetQuery("sort")
        if !exists {
            sort = "asc"
        }
        
        c.JSON(200, gin.H{
            "keyword": keyword,
            "page":    page,
            "sort":    sort,
        })
    })
    
    r.Run()
}
```

#### è·å–å¤šä¸ªåŒåå‚æ•°

```go
r.GET("/tags", func(c *gin.Context) {
    // è·å–æ‰€æœ‰åŒåçš„æŸ¥è¯¢å‚æ•°
    tags := c.QueryArray("tag")
    
    c.JSON(200, gin.H{
        "tags": tags,
    })
})

// è®¿é—®: /tags?tag=golang&tag=web&tag=api
// è¿”å›: {"tags":["golang","web","api"]}
```

#### è·å–æŸ¥è¯¢å‚æ•°Map

```go
r.GET("/filters", func(c *gin.Context) {
    // è·å–æ‰€æœ‰æŸ¥è¯¢å‚æ•°
    params := c.Request.URL.Query()
    
    filters := make(map[string]string)
    for key, values := range params {
        if len(values) > 0 {
            filters[key] = values[0]
        }
    }
    
    c.JSON(200, gin.H{
        "filters": filters,
    })
})
```

### 1.2 è·¯å¾„å‚æ•°ï¼ˆPath Parametersï¼‰

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    // å•ä¸ªè·¯å¾„å‚æ•°
    r.GET("/user/:id", func(c *gin.Context) {
        id := c.Param("id")
        c.JSON(200, gin.H{"id": id})
    })
    
    // å¤šä¸ªè·¯å¾„å‚æ•°
    r.GET("/user/:id/posts/:postId", func(c *gin.Context) {
        userId := c.Param("id")
        postId := c.Param("postId")
        c.JSON(200, gin.H{
            "userId": userId,
            "postId": postId,
        })
    })
    
    // é€šé…ç¬¦å‚æ•°
    r.GET("/files/*filepath", func(c *gin.Context) {
        filepath := c.Param("filepath")
        c.JSON(200, gin.H{"filepath": filepath})
    })
    
    r.Run()
}
```

### 1.3 è¡¨å•å‚æ•°ï¼ˆForm Parametersï¼‰

#### application/x-www-form-urlencoded

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    r.POST("/login", func(c *gin.Context) {
        // è·å–è¡¨å•å­—æ®µ
        username := c.PostForm("username")
        password := c.PostForm("password")
        
        // è·å–è¡¨å•å­—æ®µï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼
        remember := c.DefaultPostForm("remember", "false")
        
        // æ£€æŸ¥è¡¨å•å­—æ®µæ˜¯å¦å­˜åœ¨
        email, exists := c.GetPostForm("email")
        if !exists {
            email = ""
        }
        
        c.JSON(200, gin.H{
            "username": username,
            "password": password, // å®é™…åº”ç”¨ä¸­ä¸è¦è¿”å›å¯†ç 
            "remember": remember,
            "email":    email,
        })
    })
    
    r.Run()
}
```

#### multipart/form-dataï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰

```go
r.POST("/upload", func(c *gin.Context) {
    // è·å–æ–‡ä»¶
    file, err := c.FormFile("file")
    if err != nil {
        c.JSON(400, gin.H{"error": err.Error()})
        return
    }
    
    // è·å–å…¶ä»–è¡¨å•å­—æ®µ
    description := c.PostForm("description")
    
    // ä¿å­˜æ–‡ä»¶
    filename := filepath.Base(file.Filename)
    if err := c.SaveUploadedFile(file, "./uploads/"+filename); err != nil {
        c.JSON(500, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(200, gin.H{
        "filename":    filename,
        "description": description,
    })
})
```

### 1.4 JSONè¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰

```go
package main

import (
    "github.com/gin-gonic/gin"
    "net/http"
)

type User struct {
    Name  string `json:"name"`
    Email string `json:"email"`
    Age   int    `json:"age"`
}

func main() {
    r := gin.Default()
    
    r.POST("/users", func(c *gin.Context) {
        var user User
        
        // ç»‘å®šJSONåˆ°ç»“æ„ä½“
        if err := c.ShouldBindJSON(&user); err != nil {
            c.JSON(http.StatusBadRequest, gin.H{
                "error": err.Error(),
            })
            return
        }
        
        c.JSON(http.StatusOK, gin.H{
            "message": "User created",
            "user":    user,
        })
    })
    
    r.Run()
}
```

### 1.5 åŸå§‹è¯·æ±‚ä½“

```go
r.POST("/raw", func(c *gin.Context) {
    // è¯»å–åŸå§‹è¯·æ±‚ä½“
    body, err := c.GetRawData()
    if err != nil {
        c.JSON(400, gin.H{"error": err.Error()})
        return
    }
    
    c.JSON(200, gin.H{
        "body": string(body),
    })
})
```

---

## äºŒã€è¯·æ±‚å¤´ä¿¡æ¯

### 2.1 è·å–è¯·æ±‚å¤´

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    r.GET("/headers", func(c *gin.Context) {
        // è·å–å•ä¸ªè¯·æ±‚å¤´
        userAgent := c.GetHeader("User-Agent")
        
        // è·å–è¯·æ±‚å¤´ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼
        contentType := c.GetHeader("Content-Type")
        
        // è·å–æ‰€æœ‰è¯·æ±‚å¤´
        headers := c.Request.Header
        
        c.JSON(200, gin.H{
            "User-Agent":   userAgent,
            "Content-Type": contentType,
            "All-Headers": headers,
        })
    })
    
    r.Run()
}
```

### 2.2 å®¢æˆ·ç«¯ä¿¡æ¯

```go
r.GET("/client", func(c *gin.Context) {
    // è·å–å®¢æˆ·ç«¯IP
    clientIP := c.ClientIP()
    
    // è·å–è¯·æ±‚æ–¹æ³•
    method := c.Request.Method
    
    // è·å–è¯·æ±‚URL
    url := c.Request.URL.String()
    
    // è·å–è¯·æ±‚è·¯å¾„
    path := c.Request.URL.Path
    
    c.JSON(200, gin.H{
        "clientIP": clientIP,
        "method":   method,
        "url":      url,
        "path":     path,
    })
})
```

---

## ä¸‰ã€JSONå“åº”

### 3.1 åŸºæœ¬JSONå“åº”

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    r.GET("/json", func(c *gin.Context) {
        // æ–¹å¼1ï¼šä½¿ç”¨gin.Hï¼ˆmap[string]interface{}ï¼‰
        c.JSON(200, gin.H{
            "message": "Hello",
            "status":  "success",
        })
        
        // æ–¹å¼2ï¼šä½¿ç”¨ç»“æ„ä½“
        type Response struct {
            Message string `json:"message"`
            Status  string `json:"status"`
        }
        
        resp := Response{
            Message: "Hello",
            Status:  "success",
        }
        c.JSON(200, resp)
    })
    
    r.Run()
}
```

### 3.2 å¸¦ç¼©è¿›çš„JSONï¼ˆå¼€å‘è°ƒè¯•ï¼‰

```go
r.GET("/json-pretty", func(c *gin.Context) {
    c.IndentedJSON(200, gin.H{
        "message": "Hello",
        "status":  "success",
    })
})
```

### 3.3 çº¯JSONï¼ˆæ— HTMLè½¬ä¹‰ï¼‰

```go
r.GET("/json-pure", func(c *gin.Context) {
    c.PureJSON(200, gin.H{
        "html": "<b>Hello</b>", // ä¸ä¼šè½¬ä¹‰HTML
    })
})
```

---

## å››ã€å…¶ä»–å“åº”æ ¼å¼

### 4.1 XMLå“åº”

```go
package main

import "github.com/gin-gonic/gin"

type User struct {
    Name  string `xml:"name"`
    Email string `xml:"email"`
}

func main() {
    r := gin.Default()
    
    r.GET("/xml", func(c *gin.Context) {
        user := User{
            Name:  "Alice",
            Email: "alice@example.com",
        }
        c.XML(200, user)
    })
    
    r.Run()
}
```

### 4.2 YAMLå“åº”

```go
r.GET("/yaml", func(c *gin.Context) {
    data := gin.H{
        "name":  "Alice",
        "email": "alice@example.com",
    }
    c.YAML(200, data)
})
```

### 4.3 HTMLå“åº”

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    // åŠ è½½HTMLæ¨¡æ¿
    r.LoadHTMLGlob("templates/*")
    
    r.GET("/html", func(c *gin.Context) {
        c.HTML(200, "index.html", gin.H{
            "title": "Home Page",
            "name":  "Alice",
        })
    })
    
    r.Run()
}
```

**templates/index.html**:

```html
<!DOCTYPE html>
<html>
<head>
    <title>{{.title}}</title>
</head>
<body>
    <h1>Hello, {{.name}}!</h1>
</body>
</html>
```

### 4.4 å­—ç¬¦ä¸²å“åº”

```go
r.GET("/string", func(c *gin.Context) {
    c.String(200, "Hello, World!")
})
```

### 4.5 æ•°æ®æµå“åº”

```go
r.GET("/stream", func(c *gin.Context) {
    c.Stream(func(w io.Writer) bool {
        // å†™å…¥æ•°æ®
        fmt.Fprintf(w, "data: %s\n\n", time.Now().Format("2006-01-02 15:04:05"))
        time.Sleep(1 * time.Second)
        return true // ç»§ç»­
    })
})
```

---

## äº”ã€çŠ¶æ€ç å’Œå“åº”å¤´

### 5.1 HTTPçŠ¶æ€ç 

```go
package main

import (
    "github.com/gin-gonic/gin"
    "net/http"
)

func main() {
    r := gin.Default()
    
    // æˆåŠŸå“åº”
    r.GET("/success", func(c *gin.Context) {
        c.JSON(http.StatusOK, gin.H{"message": "Success"})
    })
    
    // åˆ›å»ºæˆåŠŸ
    r.POST("/create", func(c *gin.Context) {
        c.JSON(http.StatusCreated, gin.H{"message": "Created"})
    })
    
    // æœªæ‰¾åˆ°
    r.GET("/notfound", func(c *gin.Context) {
        c.JSON(http.StatusNotFound, gin.H{"error": "Not Found"})
    })
    
    // æœåŠ¡å™¨é”™è¯¯
    r.GET("/error", func(c *gin.Context) {
        c.JSON(http.StatusInternalServerError, gin.H{"error": "Internal Error"})
    })
    
    r.Run()
}
```

### 5.2 è®¾ç½®å“åº”å¤´

```go
r.GET("/headers", func(c *gin.Context) {
    // è®¾ç½®å•ä¸ªå“åº”å¤´
    c.Header("Content-Type", "application/json")
    c.Header("X-Custom-Header", "custom-value")
    
    // è®¾ç½®å¤šä¸ªå“åº”å¤´
    c.Header("Cache-Control", "no-cache, no-store, must-revalidate")
    c.Header("Pragma", "no-cache")
    c.Header("Expires", "0")
    
    c.JSON(200, gin.H{"message": "Headers set"})
})
```

### 5.3 CORSå“åº”å¤´

```go
r.GET("/cors", func(c *gin.Context) {
    c.Header("Access-Control-Allow-Origin", "*")
    c.Header("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS")
    c.Header("Access-Control-Allow-Headers", "Content-Type, Authorization")
    
    c.JSON(200, gin.H{"message": "CORS enabled"})
})
```

---

## å…­ã€æ–‡ä»¶å“åº”

### 6.1 æ–‡ä»¶ä¸‹è½½

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    r.GET("/download", func(c *gin.Context) {
        // ä¸‹è½½æ–‡ä»¶
        c.File("./files/document.pdf")
    })
    
    // æŒ‡å®šä¸‹è½½æ–‡ä»¶å
    r.GET("/download-as", func(c *gin.Context) {
        c.FileAttachment("./files/document.pdf", "my-document.pdf")
    })
    
    r.Run()
}
```

### 6.2 æ–‡ä»¶æ•°æ®æµ

```go
r.GET("/file", func(c *gin.Context) {
    file, err := os.Open("./files/image.jpg")
    if err != nil {
        c.JSON(500, gin.H{"error": err.Error()})
        return
    }
    defer file.Close()
    
    // è®¾ç½®Content-Type
    c.Header("Content-Type", "image/jpeg")
    
    // æµå¼ä¼ è¾“æ–‡ä»¶
    io.Copy(c.Writer, file)
})
```

### 6.3 é™æ€æ–‡ä»¶æœåŠ¡

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    // æä¾›é™æ€æ–‡ä»¶æœåŠ¡
    r.Static("/static", "./static")
    
    // æä¾›å•ä¸ªæ–‡ä»¶
    r.StaticFile("/favicon.ico", "./static/favicon.ico")
    
    // æä¾›æ–‡ä»¶ç³»ç»Ÿ
    r.StaticFS("/files", http.Dir("./files"))
    
    r.Run()
}
```

---

## ä¸ƒã€é‡å®šå‘

### 7.1 HTTPé‡å®šå‘

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    // ä¸´æ—¶é‡å®šå‘ï¼ˆ302ï¼‰
    r.GET("/redirect", func(c *gin.Context) {
        c.Redirect(302, "https://www.google.com")
    })
    
    // æ°¸ä¹…é‡å®šå‘ï¼ˆ301ï¼‰
    r.GET("/moved", func(c *gin.Context) {
        c.Redirect(301, "/new-location")
    })
    
    r.Run()
}
```

---

## å…«ã€ç»¼åˆç¤ºä¾‹

åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·APIï¼š

```go
package main

import (
    "github.com/gin-gonic/gin"
    "net/http"
    "strconv"
)

type User struct {
    ID    int    `json:"id"`
    Name  string `json:"name"`
    Email string `json:"email"`
    Age   int    `json:"age"`
}

var users = []User{
    {ID: 1, Name: "Alice", Email: "alice@example.com", Age: 25},
    {ID: 2, Name: "Bob", Email: "bob@example.com", Age: 30},
}

func main() {
    r := gin.Default()
    
    // è·å–æ‰€æœ‰ç”¨æˆ·ï¼ˆæ”¯æŒæŸ¥è¯¢å‚æ•°ï¼‰
    r.GET("/users", func(c *gin.Context) {
        // è·å–æŸ¥è¯¢å‚æ•°
        page := c.DefaultQuery("page", "1")
        limit := c.DefaultQuery("limit", "10")
        search := c.Query("search")
        
        result := users
        
        // ç®€å•çš„æœç´¢è¿‡æ»¤
        if search != "" {
            filtered := []User{}
            for _, user := range users {
                if user.Name == search || user.Email == search {
                    filtered = append(filtered, user)
                }
            }
            result = filtered
        }
        
        c.JSON(http.StatusOK, gin.H{
            "page":  page,
            "limit": limit,
            "data":  result,
        })
    })
    
    // æ ¹æ®IDè·å–ç”¨æˆ·
    r.GET("/users/:id", func(c *gin.Context) {
        idStr := c.Param("id")
        id, err := strconv.Atoi(idStr)
        if err != nil {
            c.JSON(http.StatusBadRequest, gin.H{
                "error": "Invalid user ID",
            })
            return
        }
        
        for _, user := range users {
            if user.ID == id {
                c.JSON(http.StatusOK, gin.H{
                    "data": user,
                })
                return
            }
        }
        
        c.JSON(http.StatusNotFound, gin.H{
            "error": "User not found",
        })
    })
    
    // åˆ›å»ºç”¨æˆ·
    r.POST("/users", func(c *gin.Context) {
        var newUser User
        
        if err := c.ShouldBindJSON(&newUser); err != nil {
            c.JSON(http.StatusBadRequest, gin.H{
                "error": err.Error(),
            })
            return
        }
        
        // ç”Ÿæˆæ–°ID
        newUser.ID = len(users) + 1
        users = append(users, newUser)
        
        c.JSON(http.StatusCreated, gin.H{
            "data": newUser,
        })
    })
    
    // æ›´æ–°ç”¨æˆ·
    r.PUT("/users/:id", func(c *gin.Context) {
        idStr := c.Param("id")
        id, err := strconv.Atoi(idStr)
        if err != nil {
            c.JSON(http.StatusBadRequest, gin.H{
                "error": "Invalid user ID",
            })
            return
        }
        
        var updatedUser User
        if err := c.ShouldBindJSON(&updatedUser); err != nil {
            c.JSON(http.StatusBadRequest, gin.H{
                "error": err.Error(),
            })
            return
        }
        
        for i, user := range users {
            if user.ID == id {
                updatedUser.ID = id
                users[i] = updatedUser
                c.JSON(http.StatusOK, gin.H{
                    "data": updatedUser,
                })
                return
            }
        }
        
        c.JSON(http.StatusNotFound, gin.H{
            "error": "User not found",
        })
    })
    
    // åˆ é™¤ç”¨æˆ·
    r.DELETE("/users/:id", func(c *gin.Context) {
        idStr := c.Param("id")
        id, err := strconv.Atoi(idStr)
        if err != nil {
            c.JSON(http.StatusBadRequest, gin.H{
                "error": "Invalid user ID",
            })
            return
        }
        
        for i, user := range users {
            if user.ID == id {
                users = append(users[:i], users[i+1:]...)
                c.JSON(http.StatusOK, gin.H{
                    "message": "User deleted",
                })
                return
            }
        }
        
        c.JSON(http.StatusNotFound, gin.H{
            "error": "User not found",
        })
    })
    
    r.Run(":8080")
}
```

---

## æ€»ç»“

1. **è¯·æ±‚å‚æ•°**ï¼šæŸ¥è¯¢å‚æ•°ã€è·¯å¾„å‚æ•°ã€è¡¨å•å‚æ•°ã€JSONè¯·æ±‚ä½“
2. **è¯·æ±‚å¤´**ï¼šè·å–è¯·æ±‚å¤´ä¿¡æ¯å’Œå®¢æˆ·ç«¯ä¿¡æ¯
3. **å“åº”æ ¼å¼**ï¼šJSONã€XMLã€YAMLã€HTMLã€å­—ç¬¦ä¸²ç­‰
4. **çŠ¶æ€ç **ï¼šæ­£ç¡®ä½¿ç”¨HTTPçŠ¶æ€ç 
5. **å“åº”å¤´**ï¼šè®¾ç½®è‡ªå®šä¹‰å“åº”å¤´
6. **æ–‡ä»¶å¤„ç†**ï¼šæ–‡ä»¶ä¸‹è½½å’Œé™æ€æ–‡ä»¶æœåŠ¡
7. **é‡å®šå‘**ï¼šHTTPé‡å®šå‘çš„ä½¿ç”¨

**ä¸‹ä¸€æ­¥**ï¼šå­¦ä¹ [ç¬¬3è¯¾ï¼šä¸­é—´ä»¶ä¸è·¯ç”±ç»„](./3.Ginè¿›é˜¶ï¼šä¸­é—´ä»¶ä¸è·¯ç”±ç»„.md)ï¼Œäº†è§£å¦‚ä½•ç»„ç»‡ä»£ç å’Œå®ç°è®¤è¯ç­‰åŠŸèƒ½ã€‚
