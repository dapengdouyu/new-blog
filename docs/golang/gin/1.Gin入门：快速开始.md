---
title: 1ã€Ginå…¥é—¨ï¼šå¿«é€Ÿå¼€å§‹
date: 2026-01-06
description: Ginæ¡†æ¶å¿«é€Ÿå…¥é—¨ï¼Œåˆ›å»ºç¬¬ä¸€ä¸ªWebåº”ç”¨
---

# 1ã€Ginå…¥é—¨ï¼šå¿«é€Ÿå¼€å§‹

æœ¬æ–‡æ¡£å°†å¸¦ä½ å¿«é€Ÿä¸Šæ‰‹Ginæ¡†æ¶ï¼Œåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªWebåº”ç”¨ã€‚

## ğŸ¯ æœ¬è¯¾å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬è¯¾åï¼Œä½ å°†èƒ½å¤Ÿï¼š
- âœ… äº†è§£Ginæ¡†æ¶çš„ç‰¹ç‚¹å’Œä¼˜åŠ¿
- âœ… å­¦ä¼šå®‰è£…å’Œåˆå§‹åŒ–Gin
- âœ… åˆ›å»ºç¬¬ä¸€ä¸ªHello Worldåº”ç”¨
- âœ… æŒæ¡åŸºæœ¬çš„è·¯ç”±é…ç½®
- âœ… å¯åŠ¨å’Œè¿è¡ŒGinæœåŠ¡å™¨

---

## ä¸€ã€Ginæ¡†æ¶ç®€ä»‹

### 1.1 ä»€ä¹ˆæ˜¯Ginï¼Ÿ

Ginæ˜¯ä¸€ä¸ªç”¨Goè¯­è¨€ç¼–å†™çš„HTTP Webæ¡†æ¶ã€‚å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- **é«˜æ€§èƒ½**ï¼šåŸºäº`httprouter`ï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿ`net/http`
- **è½»é‡çº§**ï¼šæ¡†æ¶æœ¬èº«éå¸¸è½»é‡ï¼ŒAPIç®€æ´
- **æ˜“ç”¨æ€§**ï¼šå­¦ä¹ æ›²çº¿å¹³ç¼“ï¼Œæ–‡æ¡£å®Œå–„
- **åŠŸèƒ½ä¸°å¯Œ**ï¼šæ”¯æŒä¸­é—´ä»¶ã€è·¯ç”±ç»„ã€æ•°æ®ç»‘å®šç­‰ç‰¹æ€§
- **ç¤¾åŒºæ´»è·ƒ**ï¼šGitHubä¸Šæœ‰è¶…è¿‡70k+ starsï¼Œç¤¾åŒºæ”¯æŒè‰¯å¥½

### 1.2 ä¸ºä»€ä¹ˆé€‰æ‹©Ginï¼Ÿ

ä¸å…¶ä»–Go Webæ¡†æ¶ç›¸æ¯”ï¼ŒGinçš„ä¼˜åŠ¿ï¼š

| ç‰¹æ€§ | Gin | æ ‡å‡†åº“net/http | Echo | Fiber |
|------|-----|---------------|------|-------|
| **æ€§èƒ½** | â­â­â­â­â­ | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| **æ˜“ç”¨æ€§** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ | â­â­â­â­ |
| **ä¸­é—´ä»¶** | âœ… ä¸°å¯Œ | âŒ éœ€è‡ªå·±å®ç° | âœ… ä¸°å¯Œ | âœ… ä¸°å¯Œ |
| **å­¦ä¹ æ›²çº¿** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ | â­â­â­â­ |

---

## äºŒã€å®‰è£…Gin

### 2.1 åˆå§‹åŒ–Goæ¨¡å—

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç›®å½•å¹¶åˆå§‹åŒ–Goæ¨¡å—ï¼š

```bash
mkdir gin-tutorial
cd gin-tutorial
go mod init gin-tutorial
```

### 2.2 å®‰è£…Gin

ä½¿ç”¨`go get`å‘½ä»¤å®‰è£…Ginï¼š

```bash
go get -u github.com/gin-gonic/gin
```

å®‰è£…å®Œæˆåï¼Œä½ çš„`go.mod`æ–‡ä»¶åº”è¯¥åŒ…å«Ginä¾èµ–ï¼š

```go
module gin-tutorial

go 1.21

require github.com/gin-gonic/gin v1.9.1
```

---

## ä¸‰ã€ç¬¬ä¸€ä¸ªHello Worldåº”ç”¨

### 3.1 åˆ›å»ºmain.go

åˆ›å»ºä¸€ä¸ª`main.go`æ–‡ä»¶ï¼š

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    // åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„Ginå¼•æ“
    r := gin.Default()
    
    // å®šä¹‰ä¸€ä¸ªGETè·¯ç”±
    r.GET("/", func(c *gin.Context) {
        c.JSON(200, gin.H{
            "message": "Hello World!",
        })
    })
    
    // å¯åŠ¨æœåŠ¡å™¨ï¼Œé»˜è®¤åœ¨8080ç«¯å£
    r.Run() // ç­‰åŒäº r.Run(":8080")
}
```

### 3.2 è¿è¡Œåº”ç”¨

åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š

```bash
go run main.go
```

ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] GET    /                         --> main.main.func1 (3 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is not safe. We recommend you to set the value according to the CIDR notation.
[GIN-debug] Listening and serving HTTP on :8080
```

### 3.3 æµ‹è¯•åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8080`ï¼Œæˆ–è€…ä½¿ç”¨curlï¼š

```bash
curl http://localhost:8080
```

ä½ ä¼šçœ‹åˆ°JSONå“åº”ï¼š

```json
{"message":"Hello World!"}
```

ğŸ‰ æ­å–œï¼ä½ å·²ç»æˆåŠŸåˆ›å»ºäº†ç¬¬ä¸€ä¸ªGinåº”ç”¨ï¼

---

## å››ã€åŸºæœ¬è·¯ç”±é…ç½®

### 4.1 HTTPæ–¹æ³•

Ginæ”¯æŒæ‰€æœ‰HTTPæ–¹æ³•ï¼š

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    // GETè¯·æ±‚
    r.GET("/get", func(c *gin.Context) {
        c.JSON(200, gin.H{"method": "GET"})
    })
    
    // POSTè¯·æ±‚
    r.POST("/post", func(c *gin.Context) {
        c.JSON(200, gin.H{"method": "POST"})
    })
    
    // PUTè¯·æ±‚
    r.PUT("/put", func(c *gin.Context) {
        c.JSON(200, gin.H{"method": "PUT"})
    })
    
    // DELETEè¯·æ±‚
    r.DELETE("/delete", func(c *gin.Context) {
        c.JSON(200, gin.H{"method": "DELETE"})
    })
    
    // PATCHè¯·æ±‚
    r.PATCH("/patch", func(c *gin.Context) {
        c.JSON(200, gin.H{"method": "PATCH"})
    })
    
    // OPTIONSè¯·æ±‚
    r.OPTIONS("/options", func(c *gin.Context) {
        c.JSON(200, gin.H{"method": "OPTIONS"})
    })
    
    // HEADè¯·æ±‚
    r.HEAD("/head", func(c *gin.Context) {
        c.JSON(200, gin.H{"method": "HEAD"})
    })
    
    r.Run()
}
```

### 4.2 è·¯å¾„å‚æ•°

ä½¿ç”¨`:param`è·å–è·¯å¾„å‚æ•°ï¼š

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    // å•ä¸ªè·¯å¾„å‚æ•°
    r.GET("/user/:name", func(c *gin.Context) {
        name := c.Param("name")
        c.JSON(200, gin.H{
            "name": name,
        })
    })
    
    // å¤šä¸ªè·¯å¾„å‚æ•°
    r.GET("/user/:name/:id", func(c *gin.Context) {
        name := c.Param("name")
        id := c.Param("id")
        c.JSON(200, gin.H{
            "name": name,
            "id":   id,
        })
    })
    
    // é€šé…ç¬¦å‚æ•°ï¼ˆåŒ¹é…æ‰€æœ‰è·¯å¾„ï¼‰
    r.GET("/file/*path", func(c *gin.Context) {
        path := c.Param("path")
        c.JSON(200, gin.H{
            "path": path,
        })
    })
    
    r.Run()
}
```

**æµ‹è¯•ç¤ºä¾‹**ï¼š

```bash
# è®¿é—® http://localhost:8080/user/alice
# è¿”å›: {"name":"alice"}

# è®¿é—® http://localhost:8080/user/alice/123
# è¿”å›: {"name":"alice","id":"123"}

# è®¿é—® http://localhost:8080/file/images/photo.jpg
# è¿”å›: {"path":"/images/photo.jpg"}
```

### 4.3 æŸ¥è¯¢å‚æ•°

ä½¿ç”¨`Query`æ–¹æ³•è·å–URLæŸ¥è¯¢å‚æ•°ï¼š

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    // è·å–æŸ¥è¯¢å‚æ•°
    r.GET("/search", func(c *gin.Context) {
        // è·å–å•ä¸ªå‚æ•°
        q := c.Query("q")
        
        // è·å–å‚æ•°ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼
        page := c.DefaultQuery("page", "1")
        
        // æ£€æŸ¥å‚æ•°æ˜¯å¦å­˜åœ¨
        sort, exists := c.GetQuery("sort")
        if !exists {
            sort = "asc"
        }
        
        c.JSON(200, gin.H{
            "q":    q,
            "page": page,
            "sort": sort,
        })
    })
    
    r.Run()
}
```

**æµ‹è¯•ç¤ºä¾‹**ï¼š

```bash
# è®¿é—® http://localhost:8080/search?q=golang&page=2&sort=desc
# è¿”å›: {"q":"golang","page":"2","sort":"desc"}
```

### 4.4 è·¯ç”±ä¼˜å…ˆçº§

Ginçš„è·¯ç”±åŒ¹é…è§„åˆ™ï¼š

1. **ç²¾ç¡®åŒ¹é…ä¼˜å…ˆ**ï¼š`/user/new` ä¼˜å…ˆäº `/user/:name`
2. **å‚æ•°è·¯ç”±**ï¼š`/user/:name` åŒ¹é… `/user/alice`
3. **é€šé…ç¬¦è·¯ç”±**ï¼š`/file/*path` åŒ¹é…æ‰€æœ‰ä»¥ `/file/` å¼€å¤´çš„è·¯å¾„

```go
package main

import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    
    // è¿™ä¸ªè·¯ç”±ä¼šä¼˜å…ˆåŒ¹é…
    r.GET("/user/new", func(c *gin.Context) {
        c.JSON(200, gin.H{"route": "exact match"})
    })
    
    // è¿™ä¸ªè·¯ç”±åŒ¹é…å…¶ä»–æƒ…å†µ
    r.GET("/user/:name", func(c *gin.Context) {
        name := c.Param("name")
        c.JSON(200, gin.H{"route": "param match", "name": name})
    })
    
    r.Run()
}
```

---

## äº”ã€å¯åŠ¨æœåŠ¡å™¨

### 5.1 é»˜è®¤ç«¯å£

```go
r.Run() // é»˜è®¤ç›‘å¬ :8080
```

### 5.2 æŒ‡å®šç«¯å£

```go
r.Run(":3000")  // ç›‘å¬3000ç«¯å£
r.Run("127.0.0.1:8080")  // æŒ‡å®šIPå’Œç«¯å£
```

### 5.3 ä½¿ç”¨http.Server

å¯¹äºæ›´é«˜çº§çš„é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨`http.Server`ï¼š

```go
package main

import (
    "context"
    "github.com/gin-gonic/gin"
    "net/http"
    "os"
    "os/signal"
    "time"
)

func main() {
    r := gin.Default()
    
    r.GET("/", func(c *gin.Context) {
        c.JSON(200, gin.H{"message": "Hello World!"})
    })
    
    srv := &http.Server{
        Addr:    ":8080",
        Handler: r,
    }
    
    // åœ¨goroutineä¸­å¯åŠ¨æœåŠ¡å™¨
    go func() {
        if err := srv.ListenAndServe(); err != nil && err != http.ErrServerClosed {
            panic(err)
        }
    }()
    
    // ç­‰å¾…ä¸­æ–­ä¿¡å·ä»¥ä¼˜é›…åœ°å…³é—­æœåŠ¡å™¨
    quit := make(chan os.Signal, 1)
    signal.Notify(quit, os.Interrupt)
    <-quit
    
    // ä¼˜é›…å…³é—­ï¼Œç­‰å¾…5ç§’
    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
    defer cancel()
    
    if err := srv.Shutdown(ctx); err != nil {
        panic(err)
    }
}
```

---

## å…­ã€gin.Default() vs gin.New()

### 6.1 gin.Default()

`gin.Default()`åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰**Logger**å’Œ**Recovery**ä¸­é—´ä»¶çš„å¼•æ“ï¼š

```go
r := gin.Default()
// ç­‰åŒäºï¼š
// r := gin.New()
// r.Use(gin.Logger())
// r.Use(gin.Recovery())
```

### 6.2 gin.New()

`gin.New()`åˆ›å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•ä¸­é—´ä»¶çš„å¼•æ“ï¼š

```go
r := gin.New()
// éœ€è¦æ‰‹åŠ¨æ·»åŠ ä¸­é—´ä»¶
r.Use(gin.Logger())
r.Use(gin.Recovery())
```

**ä½¿ç”¨å»ºè®®**ï¼š
- **å¼€å‘ç¯å¢ƒ**ï¼šä½¿ç”¨`gin.Default()`ï¼Œæ–¹ä¾¿è°ƒè¯•
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨`gin.New()`ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸­é—´ä»¶é…ç½®

---

## ä¸ƒã€ç»¼åˆç¤ºä¾‹

åˆ›å»ºä¸€ä¸ªç®€å•çš„ç”¨æˆ·APIï¼š

```go
package main

import (
    "github.com/gin-gonic/gin"
    "net/http"
)

type User struct {
    ID   int    `json:"id"`
    Name string `json:"name"`
    Age  int    `json:"age"`
}

// æ¨¡æ‹Ÿæ•°æ®åº“
var users = []User{
    {ID: 1, Name: "Alice", Age: 25},
    {ID: 2, Name: "Bob", Age: 30},
    {ID: 3, Name: "Charlie", Age: 35},
}

func main() {
    r := gin.Default()
    
    // è·å–æ‰€æœ‰ç”¨æˆ·
    r.GET("/users", func(c *gin.Context) {
        c.JSON(http.StatusOK, gin.H{
            "data": users,
        })
    })
    
    // æ ¹æ®IDè·å–ç”¨æˆ·
    r.GET("/users/:id", func(c *gin.Context) {
        id := c.Param("id")
        
        // è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…åº”è¯¥ä»æ•°æ®åº“æŸ¥è¯¢
        for _, user := range users {
            if fmt.Sprintf("%d", user.ID) == id {
                c.JSON(http.StatusOK, gin.H{
                    "data": user,
                })
                return
            }
        }
        
        c.JSON(http.StatusNotFound, gin.H{
            "error": "User not found",
        })
    })
    
    // åˆ›å»ºç”¨æˆ·
    r.POST("/users", func(c *gin.Context) {
        var newUser User
        if err := c.ShouldBindJSON(&newUser); err != nil {
            c.JSON(http.StatusBadRequest, gin.H{
                "error": err.Error(),
            })
            return
        }
        
        // ç”Ÿæˆæ–°IDï¼ˆç®€åŒ–å¤„ç†ï¼‰
        newUser.ID = len(users) + 1
        users = append(users, newUser)
        
        c.JSON(http.StatusCreated, gin.H{
            "data": newUser,
        })
    })
    
    r.Run(":8080")
}
```

---

## æ€»ç»“

1. **Ginæ¡†æ¶**ï¼šé«˜æ€§èƒ½ã€è½»é‡çº§çš„Go Webæ¡†æ¶
2. **å®‰è£…**ï¼šä½¿ç”¨`go get`å®‰è£…ï¼Œåˆå§‹åŒ–Goæ¨¡å—
3. **åŸºæœ¬è·¯ç”±**ï¼šæ”¯æŒæ‰€æœ‰HTTPæ–¹æ³•ï¼Œè·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°
4. **å¯åŠ¨æœåŠ¡å™¨**ï¼šä½¿ç”¨`Run()`æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šç«¯å£
5. **å¼•æ“åˆ›å»º**ï¼š`gin.Default()`åŒ…å«Loggerå’ŒRecoveryä¸­é—´ä»¶

**ä¸‹ä¸€æ­¥**ï¼šå­¦ä¹ [ç¬¬2è¯¾ï¼šè¯·æ±‚ä¸å“åº”](./2.GinåŸºç¡€ï¼šè¯·æ±‚ä¸å“åº”.md)ï¼Œæ·±å…¥äº†è§£å¦‚ä½•å¤„ç†HTTPè¯·æ±‚å’Œè¿”å›å“åº”ã€‚
