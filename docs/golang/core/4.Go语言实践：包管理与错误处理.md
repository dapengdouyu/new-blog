---
title: 4ã€Goè¯­è¨€å®è·µï¼šåŒ…ç®¡ç†ä¸é”™è¯¯å¤„ç†
date: 2026-01-06
description: æ·±å…¥ç†è§£Goè¯­è¨€çš„åŒ…ç®¡ç†ã€æ¨¡å—ç³»ç»Ÿã€é”™è¯¯å¤„ç†æœºåˆ¶ä»¥åŠpanicå’Œrecoverçš„ä½¿ç”¨
---

# 4ã€Goè¯­è¨€å®è·µï¼šåŒ…ç®¡ç†ä¸é”™è¯¯å¤„ç†

æœ¬æ–‡æ¡£æ·±å…¥è®²è§£Goè¯­è¨€çš„åŒ…ç®¡ç†æœºåˆ¶å’Œé”™è¯¯å¤„ç†æ¨¡å¼ã€‚åŒ…ç®¡ç†æ˜¯ç»„ç»‡ä»£ç çš„åŸºç¡€ï¼Œè€Œé”™è¯¯å¤„ç†æ˜¯ç¼–å†™å¥å£®ç¨‹åºçš„å…³é”®ã€‚

## ğŸ¯ æœ¬è¯¾å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬è¯¾åï¼Œä½ å°†èƒ½å¤Ÿï¼š
- âœ… ç†è§£åŒ…çš„æ¦‚å¿µå’Œç»„ç»‡æ–¹å¼
- âœ… æŒæ¡åŒ…çš„å¯¼å…¥å’Œå¯è§æ€§è§„åˆ™
- âœ… å­¦ä¼šä½¿ç”¨Go Modulesç®¡ç†ä¾èµ–
- âœ… æŒæ¡å¸¸ç”¨Goå‘½ä»¤è¡Œå·¥å…·
- âœ… æŒæ¡é”™è¯¯å¤„ç†çš„æœ€ä½³å®è·µ
- âœ… ç†è§£panicå’Œrecoverçš„ä½¿ç”¨åœºæ™¯

---

## ä¸€ã€åŒ…ï¼ˆPackageï¼‰

### 1.1 ä»€ä¹ˆæ˜¯åŒ…ï¼Ÿ

åŒ…ï¼ˆPackageï¼‰æ˜¯Goè¯­è¨€ä¸­ä»£ç ç»„ç»‡å’Œå¤ç”¨çš„åŸºæœ¬å•ä½ã€‚æ¯ä¸ªGoæºæ–‡ä»¶éƒ½å¿…é¡»å±äºæŸä¸ªåŒ…ã€‚

#### åŒ…çš„åŸºæœ¬æ¦‚å¿µ

```go
// æ–‡ä»¶ï¼šmain.go
package main  // å£°æ˜åŒ…å

import "fmt"

func main() {
    fmt.Println("Hello, Go!")
}
```

#### åŒ…çš„ç‰¹ç‚¹

1. **åŒ…åä¸ç›®å½•å**ï¼šé€šå¸¸åŒ…åä¸æ‰€åœ¨ç›®å½•åç›¸åŒ
2. **å¯æ‰§è¡ŒåŒ…**ï¼š`package main` è¡¨ç¤ºå¯æ‰§è¡Œç¨‹åºï¼Œå¿…é¡»åŒ…å« `main` å‡½æ•°
3. **åº“åŒ…**ï¼šå…¶ä»–åŒ…åè¡¨ç¤ºåº“ï¼Œå¯ä»¥è¢«å…¶ä»–åŒ…å¯¼å…¥ä½¿ç”¨

```go
// ç›®å½•ç»“æ„
// myproject/
//   â”œâ”€â”€ main.go          (package main)
//   â””â”€â”€ utils/
//       â””â”€â”€ helper.go    (package utils)

// main.go
package main

import (
    "fmt"
    "myproject/utils"  // å¯¼å…¥utilsåŒ…
)

func main() {
    utils.Helper()
}

// utils/helper.go
package utils  // åŒ…åä¸ç›®å½•åç›¸åŒ

import "fmt"

func Helper() {  // é¦–å­—æ¯å¤§å†™ï¼Œå¯å¯¼å‡º
    fmt.Println("Helper function")
}
```

---

### 1.2 åŒ…çš„å¯¼å…¥ï¼ˆImportï¼‰

#### åŸºæœ¬å¯¼å…¥

```go
package main

import "fmt"           // æ ‡å‡†åº“
import "os"            // æ ‡å‡†åº“
import "myproject/utils"  // æœ¬åœ°åŒ…
```

#### åˆ†ç»„å¯¼å…¥

```go
package main

import (
    // æ ‡å‡†åº“
    "fmt"
    "os"
    "strings"
    
    // ç¬¬ä¸‰æ–¹åº“
    "github.com/gin-gonic/gin"
    
    // æœ¬åœ°åŒ…
    "myproject/utils"
    "myproject/models"
)
```

#### å¯¼å…¥åˆ«å

```go
package main

import (
    f "fmt"           // ä½¿ç”¨åˆ«å f
    "os"
    _ "database/sql"  // åŒ¿åå¯¼å…¥ï¼ˆåªæ‰§è¡Œinitå‡½æ•°ï¼‰
    sql "database/sql"  // ä½¿ç”¨åˆ«å sql
)

func main() {
    f.Println("ä½¿ç”¨åˆ«å")  // è€Œä¸æ˜¯ fmt.Println
    sql.Open("mysql", "...")
}
```

#### ç‚¹å¯¼å…¥ï¼ˆä¸æ¨èï¼‰

```go
package main

import . "fmt"  // ç‚¹å¯¼å…¥ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Printlnè€Œä¸éœ€è¦fmt.

func main() {
    Println("å¯ä»¥ç›´æ¥ä½¿ç”¨")  // ä¸éœ€è¦ fmt.Println
}
```

---

### 1.3 å¯è§æ€§è§„åˆ™ï¼ˆExported vs Unexportedï¼‰

Goè¯­è¨€é€šè¿‡**é¦–å­—æ¯å¤§å°å†™**æ¥æ§åˆ¶æ ‡è¯†ç¬¦çš„å¯è§æ€§ï¼š

- **é¦–å­—æ¯å¤§å†™**ï¼šå¯å¯¼å‡ºï¼ˆExportedï¼‰ï¼Œå¯ä»¥è¢«å…¶ä»–åŒ…è®¿é—®
- **é¦–å­—æ¯å°å†™**ï¼šä¸å¯å¯¼å‡ºï¼ˆUnexportedï¼‰ï¼Œåªèƒ½åœ¨åŒ…å†…è®¿é—®

```go
// utils/helper.go
package utils

// å¯å¯¼å‡ºçš„å‡½æ•°
func PublicFunction() {
    fmt.Println("å¯ä»¥è¢«å…¶ä»–åŒ…è°ƒç”¨")
}

// ä¸å¯å¯¼å‡ºçš„å‡½æ•°
func privateFunction() {
    fmt.Println("åªèƒ½åœ¨utilsåŒ…å†…è°ƒç”¨")
}

// å¯å¯¼å‡ºçš„å˜é‡
var PublicVar = "public"

// ä¸å¯å¯¼å‡ºçš„å˜é‡
var privateVar = "private"

// å¯å¯¼å‡ºçš„ç±»å‹
type PublicStruct struct {
    PublicField  string  // å¯å¯¼å‡ºçš„å­—æ®µ
    privateField int     // ä¸å¯å¯¼å‡ºçš„å­—æ®µ
}
```

```go
// main.go
package main

import "myproject/utils"

func main() {
    utils.PublicFunction()  // âœ… å¯ä»¥è°ƒç”¨
    // utils.privateFunction()  // âŒ é”™è¯¯ï¼ä¸èƒ½è°ƒç”¨
    
    fmt.Println(utils.PublicVar)  // âœ… å¯ä»¥è®¿é—®
    // fmt.Println(utils.privateVar)  // âŒ é”™è¯¯ï¼ä¸èƒ½è®¿é—®
    
    s := utils.PublicStruct{
        PublicField: "value",  // âœ… å¯ä»¥è®¾ç½®
        // privateField: 1,     // âŒ é”™è¯¯ï¼ä¸èƒ½è®¾ç½®
    }
    fmt.Println(s)
}
```

---

### 1.4 initå‡½æ•°

æ¯ä¸ªåŒ…å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª `init` å‡½æ•°ï¼Œåœ¨åŒ…è¢«å¯¼å…¥æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚

```go
// utils/helper.go
package utils

import "fmt"

var GlobalVar string

// initå‡½æ•°åœ¨åŒ…å¯¼å…¥æ—¶è‡ªåŠ¨æ‰§è¡Œ
func init() {
    fmt.Println("utilsåŒ…è¢«å¯¼å…¥ï¼Œæ‰§è¡Œinitå‡½æ•°")
    GlobalVar = "åˆå§‹åŒ–å®Œæˆ"
}

// å¯ä»¥æœ‰å¤šä¸ªinitå‡½æ•°
func init() {
    fmt.Println("ç¬¬äºŒä¸ªinitå‡½æ•°")
}
```

```go
// main.go
package main

import (
    "fmt"
    "myproject/utils"  // å¯¼å…¥æ—¶è‡ªåŠ¨æ‰§è¡Œinitå‡½æ•°
)

func main() {
    fmt.Println("mainå‡½æ•°æ‰§è¡Œ")
    fmt.Println(utils.GlobalVar)
}

// è¾“å‡ºï¼š
// utilsåŒ…è¢«å¯¼å…¥ï¼Œæ‰§è¡Œinitå‡½æ•°
// ç¬¬äºŒä¸ªinitå‡½æ•°
// mainå‡½æ•°æ‰§è¡Œ
// åˆå§‹åŒ–å®Œæˆ
```

#### initå‡½æ•°çš„æ‰§è¡Œé¡ºåº

```go
// 1. å¯¼å…¥çš„åŒ…çš„initå‡½æ•°
// 2. å½“å‰åŒ…çš„initå‡½æ•°ï¼ˆæŒ‰æ–‡ä»¶åå­—æ¯é¡ºåºï¼‰
// 3. mainå‡½æ•°

// ç¤ºä¾‹ï¼š
// main.go
package main

import "myproject/utils"  // å…ˆæ‰§è¡ŒutilsåŒ…çš„init

func init() {
    fmt.Println("mainåŒ…çš„init")
}

func main() {
    fmt.Println("mainå‡½æ•°")
}
```

---

### 1.5 å†…éƒ¨åŒ…ï¼ˆInternal Packageï¼‰

Goè¯­è¨€æ”¯æŒå†…éƒ¨åŒ…æœºåˆ¶ï¼Œä»¥ `internal` å‘½åçš„åŒ…åªèƒ½è¢«å…¶çˆ¶ç›®å½•åŠå…¶å­ç›®å½•çš„åŒ…å¯¼å…¥ã€‚

```
project/
â”œâ”€â”€ main.go
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ helper.go
â””â”€â”€ internal/
    â””â”€â”€ secret.go      // åªèƒ½è¢«projectç›®å½•ä¸‹çš„åŒ…å¯¼å…¥
```

```go
// internal/secret.go
package internal

func SecretFunction() {
    fmt.Println("å†…éƒ¨å‡½æ•°")
}

// main.go
package main

import "myproject/internal"  // âœ… å¯ä»¥å¯¼å…¥

func main() {
    internal.SecretFunction()
}

// å…¶ä»–é¡¹ç›®çš„åŒ…æ— æ³•å¯¼å…¥internalåŒ…
```

---

## äºŒã€æ¨¡å—ï¼ˆModuleï¼‰

### 2.1 Go Modulesç®€ä»‹

Go Modulesæ˜¯Go 1.11+å¼•å…¥çš„å®˜æ–¹ä¾èµ–ç®¡ç†å·¥å…·ï¼Œè§£å†³äº†ä¹‹å‰GOPATHçš„é—®é¢˜ã€‚

#### åˆå§‹åŒ–æ¨¡å—

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
go mod init myproject

# ä¼šç”Ÿæˆgo.modæ–‡ä»¶
```

```go
// go.mod
module myproject

go 1.21

require (
    github.com/gin-gonic/gin v1.9.1
)
```

#### go.modæ–‡ä»¶ç»“æ„

```go
module myproject  // æ¨¡å—å

go 1.21  // Goç‰ˆæœ¬è¦æ±‚

require (
    github.com/example/package v1.2.3
)

replace (
    // æœ¬åœ°æ›¿æ¢
    example.com/old => example.com/new v1.0.0
)

exclude (
    // æ’é™¤ç‰¹å®šç‰ˆæœ¬
    github.com/bad/package v1.0.0
)
```

---

### 2.2 ä¾èµ–ç®¡ç†

#### æ·»åŠ ä¾èµ–

```bash
# è‡ªåŠ¨æ·»åŠ ä¾èµ–ï¼ˆæ¨èï¼‰
go get github.com/gin-gonic/gin

# æŒ‡å®šç‰ˆæœ¬
go get github.com/gin-gonic/gin@v1.9.1

# æœ€æ–°ç‰ˆæœ¬
go get github.com/gin-gonic/gin@latest

# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
go get -u github.com/gin-gonic/gin

# æ›´æ–°æ‰€æœ‰ä¾èµ–
go get -u ./...
```

#### ç§»é™¤ä¾èµ–

```bash
# ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–
go mod tidy
```

#### æŸ¥çœ‹ä¾èµ–

```bash
# æŸ¥çœ‹æ‰€æœ‰ä¾èµ–
go list -m all

# æŸ¥çœ‹ç‰¹å®šä¾èµ–
go list -m github.com/gin-gonic/gin

# æŸ¥çœ‹ä¾èµ–å›¾
go mod graph
```

---

### 2.3 ç‰ˆæœ¬ç®¡ç†

Go Modulesä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰ï¼š

- **v1.2.3**ï¼šä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬
- **v0.x.x**ï¼šå¼€å‘ç‰ˆæœ¬ï¼ŒAPIå¯èƒ½ä¸ç¨³å®š
- **v1.x.x**ï¼šç¨³å®šç‰ˆæœ¬
- **v2.x.x+**ï¼šéœ€è¦ä¿®æ”¹æ¨¡å—è·¯å¾„

```go
// v1ç‰ˆæœ¬
module github.com/example/package

// v2ç‰ˆæœ¬ï¼ˆéœ€è¦åœ¨æ¨¡å—è·¯å¾„ä¸­ä½“ç°ï¼‰
module github.com/example/package/v2
```

```go
// ä½¿ç”¨v2ç‰ˆæœ¬
import "github.com/example/package/v2"
```

---

### 2.4 ä»£ç†å’Œç§æœ‰ä»“åº“

#### è®¾ç½®ä»£ç†

```bash
# ä½¿ç”¨Goå®˜æ–¹ä»£ç†ï¼ˆæ¨èï¼Œå›½å†…å¯ç”¨ï¼‰
go env -w GOPROXY=https://goproxy.cn,direct

# æˆ–è€…ä½¿ç”¨ä¸ƒç‰›äº‘ä»£ç†
go env -w GOPROXY=https://goproxy.io,direct

# æŸ¥çœ‹å½“å‰ä»£ç†è®¾ç½®
go env GOPROXY
```

#### ç§æœ‰ä»“åº“é…ç½®

```bash
# è®¾ç½®ç§æœ‰ä»“åº“ï¼ˆä¸èµ°ä»£ç†ï¼‰
go env -w GOPRIVATE=gitlab.com/company/*,github.com/company/*

# é…ç½®ç§æœ‰ä»“åº“è®¤è¯
git config --global url."git@gitlab.com:".insteadOf "https://gitlab.com/"
```

---

## ä¸‰ã€é”™è¯¯å¤„ç†ï¼ˆError Handlingï¼‰

### 3.1 é”™è¯¯ç±»å‹

Goè¯­è¨€å°†é”™è¯¯è§†ä¸ºå€¼ï¼ˆerror is a valueï¼‰ï¼Œè€Œä¸æ˜¯å¼‚å¸¸ã€‚

#### erroræ¥å£

```go
// erroræ˜¯å†…ç½®æ¥å£
type error interface {
    Error() string
}
```

#### åˆ›å»ºé”™è¯¯

```go
package main

import (
    "errors"
    "fmt"
)

func main() {
    // æ–¹å¼1ï¼šä½¿ç”¨errors.New
    err1 := errors.New("å‘ç”Ÿäº†é”™è¯¯")
    fmt.Println(err1)
    
    // æ–¹å¼2ï¼šä½¿ç”¨fmt.Errorfï¼ˆæ”¯æŒæ ¼å¼åŒ–ï¼‰
    err2 := fmt.Errorf("é”™è¯¯ï¼š%s", "æ–‡ä»¶ä¸å­˜åœ¨")
    fmt.Println(err2)
}
```

---

### 3.2 é”™è¯¯å¤„ç†æ¨¡å¼

#### åŸºæœ¬æ¨¡å¼ï¼šæ£€æŸ¥å¹¶è¿”å›

```go
package main

import (
    "errors"
    "fmt"
    "os"
)

func readFile(filename string) (string, error) {
    data, err := os.ReadFile(filename)
    if err != nil {
        return "", fmt.Errorf("è¯»å–æ–‡ä»¶å¤±è´¥: %w", err)
    }
    return string(data), nil
}

func main() {
    content, err := readFile("test.txt")
    if err != nil {
        fmt.Println("é”™è¯¯:", err)
        return
    }
    fmt.Println("å†…å®¹:", content)
}
```

#### é”™è¯¯åŒ…è£…ï¼ˆError Wrappingï¼‰

Go 1.13+ æ”¯æŒé”™è¯¯åŒ…è£…ï¼Œå¯ä»¥ä¿ç•™é”™è¯¯é“¾ï¼š

```go
package main

import (
    "errors"
    "fmt"
    "os"
)

func readConfig() error {
    data, err := os.ReadFile("config.json")
    if err != nil {
        // ä½¿ç”¨ %w åŒ…è£…é”™è¯¯
        return fmt.Errorf("è¯»å–é…ç½®å¤±è´¥: %w", err)
    }
    // å¤„ç†data...
    return nil
}

func main() {
    err := readConfig()
    if err != nil {
        fmt.Println("é”™è¯¯:", err)
        
        // æ£€æŸ¥åº•å±‚é”™è¯¯
        if errors.Is(err, os.ErrNotExist) {
            fmt.Println("æ–‡ä»¶ä¸å­˜åœ¨")
        }
        
        // è§£åŒ…é”™è¯¯
        var pathErr *os.PathError
        if errors.As(err, &pathErr) {
            fmt.Printf("è·¯å¾„é”™è¯¯: %s\n", pathErr.Path)
        }
    }
}
```

#### errors.Is å’Œ errors.As

```go
package main

import (
    "errors"
    "fmt"
    "io"
    "os"
)

func processFile(filename string) error {
    file, err := os.Open(filename)
    if err != nil {
        return fmt.Errorf("æ‰“å¼€æ–‡ä»¶å¤±è´¥: %w", err)
    }
    defer file.Close()
    
    data := make([]byte, 1024)
    _, err = file.Read(data)
    if err != nil && err != io.EOF {
        return fmt.Errorf("è¯»å–æ–‡ä»¶å¤±è´¥: %w", err)
    }
    
    return nil
}

func main() {
    err := processFile("test.txt")
    
    // ä½¿ç”¨ errors.Is æ£€æŸ¥ç‰¹å®šé”™è¯¯
    if errors.Is(err, os.ErrNotExist) {
        fmt.Println("æ–‡ä»¶ä¸å­˜åœ¨")
    }
    
    // ä½¿ç”¨ errors.As æå–é”™è¯¯ç±»å‹
    var pathErr *os.PathError
    if errors.As(err, &pathErr) {
        fmt.Printf("è·¯å¾„: %s, æ“ä½œ: %s\n", pathErr.Path, pathErr.Op)
    }
}
```

---

### 3.3 è‡ªå®šä¹‰é”™è¯¯ç±»å‹

#### å®šä¹‰é”™è¯¯ç±»å‹

```go
package main

import (
    "fmt"
    "time"
)

// è‡ªå®šä¹‰é”™è¯¯ç±»å‹
type ValidationError struct {
    Field   string
    Message string
    Time    time.Time
}

func (e *ValidationError) Error() string {
    return fmt.Sprintf("éªŒè¯å¤±è´¥ [%s]: %s (æ—¶é—´: %v)", e.Field, e.Message, e.Time)
}

// è‡ªå®šä¹‰é”™è¯¯ç±»å‹
type NotFoundError struct {
    Resource string
    ID       string
}

func (e *NotFoundError) Error() string {
    return fmt.Sprintf("èµ„æºæœªæ‰¾åˆ°: %s (ID: %s)", e.Resource, e.ID)
}

func validateUser(name string) error {
    if name == "" {
        return &ValidationError{
            Field:   "name",
            Message: "ç”¨æˆ·åä¸èƒ½ä¸ºç©º",
            Time:    time.Now(),
        }
    }
    return nil
}

func findUser(id string) error {
    // æ¨¡æ‹Ÿæœªæ‰¾åˆ°
    return &NotFoundError{
        Resource: "User",
        ID:       id,
    }
}

func main() {
    // å¤„ç†éªŒè¯é”™è¯¯
    if err := validateUser(""); err != nil {
        fmt.Println(err)
        
        // ç±»å‹æ–­è¨€
        if ve, ok := err.(*ValidationError); ok {
            fmt.Printf("å­—æ®µ: %s, æ¶ˆæ¯: %s\n", ve.Field, ve.Message)
        }
    }
    
    // å¤„ç†æœªæ‰¾åˆ°é”™è¯¯
    if err := findUser("123"); err != nil {
        fmt.Println(err)
        
        // ä½¿ç”¨ errors.As
        var nfe *NotFoundError
        if errors.As(err, &nfe) {
            fmt.Printf("èµ„æº: %s, ID: %s\n", nfe.Resource, nfe.ID)
        }
    }
}
```

---

### 3.4 é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

#### 1. åŠæ—¶å¤„ç†é”™è¯¯

```go
// âŒ ä¸å¥½çš„åšæ³•
func badExample() {
    data, _ := os.ReadFile("file.txt")  // å¿½ç•¥é”™è¯¯
    fmt.Println(string(data))
}

// âœ… å¥½çš„åšæ³•
func goodExample() {
    data, err := os.ReadFile("file.txt")
    if err != nil {
        log.Printf("è¯»å–æ–‡ä»¶å¤±è´¥: %v", err)
        return
    }
    fmt.Println(string(data))
}
```

#### 2. æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯

```go
// âŒ ä¸å¥½çš„åšæ³•
func badExample(id int) error {
    if id < 0 {
        return errors.New("é”™è¯¯")
    }
    return nil
}

// âœ… å¥½çš„åšæ³•
func goodExample(id int) error {
    if id < 0 {
        return fmt.Errorf("æ— æ•ˆçš„ç”¨æˆ·ID: %d (å¿…é¡»å¤§äº0)", id)
    }
    return nil
}
```

#### 3. ä½¿ç”¨é”™è¯¯åŒ…è£…ä¿ç•™ä¸Šä¸‹æ–‡

```go
func processUser(id int) error {
    user, err := getUser(id)
    if err != nil {
        // åŒ…è£…é”™è¯¯ï¼Œä¿ç•™ä¸Šä¸‹æ–‡
        return fmt.Errorf("å¤„ç†ç”¨æˆ·å¤±è´¥ (ID: %d): %w", id, err)
    }
    
    err = validateUser(user)
    if err != nil {
        return fmt.Errorf("éªŒè¯ç”¨æˆ·å¤±è´¥ (ID: %d): %w", id, err)
    }
    
    return nil
}
```

#### 4. ä¸è¦å¿½ç•¥é”™è¯¯

```go
// âŒ ä¸å¥½çš„åšæ³•
func badExample() {
    file, _ := os.Open("file.txt")
    defer file.Close()  // å¦‚æœfileæ˜¯nilï¼Œè¿™é‡Œä¼španic
}

// âœ… å¥½çš„åšæ³•
func goodExample() {
    file, err := os.Open("file.txt")
    if err != nil {
        log.Printf("æ‰“å¼€æ–‡ä»¶å¤±è´¥: %v", err)
        return
    }
    defer file.Close()
}
```

---

## å››ã€Panic å’Œ Recover

### 4.1 Panic

`panic` ç”¨äºè¡¨ç¤ºç¨‹åºé‡åˆ°äº†æ— æ³•æ¢å¤çš„é”™è¯¯ï¼Œä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚

#### åŸºæœ¬ä½¿ç”¨

```go
package main

import "fmt"

func main() {
    fmt.Println("å¼€å§‹")
    panic("å‘ç”Ÿäº†ä¸¥é‡é”™è¯¯ï¼")
    fmt.Println("è¿™è¡Œä¸ä¼šæ‰§è¡Œ")
}

// è¾“å‡ºï¼š
// å¼€å§‹
// panic: å‘ç”Ÿäº†ä¸¥é‡é”™è¯¯ï¼
// goroutine 1 [running]:
// ...
```

#### ä½•æ—¶ä½¿ç”¨Panic

```go
package main

import "fmt"

// 1. ç¨‹åºåˆå§‹åŒ–å¤±è´¥
func init() {
    if !checkConfig() {
        panic("é…ç½®åˆå§‹åŒ–å¤±è´¥ï¼Œç¨‹åºæ— æ³•ç»§ç»­")
    }
}

// 2. ä¸å¯æ¢å¤çš„é”™è¯¯
func divide(a, b int) int {
    if b == 0 {
        panic("é™¤æ•°ä¸èƒ½ä¸º0")
    }
    return a / b
}

// 3. ç¼–ç¨‹é”™è¯¯ï¼ˆåº”è¯¥é¿å…ï¼Œä½¿ç”¨é”™è¯¯å¤„ç†æ›´å¥½ï¼‰
func getElement(arr []int, index int) int {
    if index < 0 || index >= len(arr) {
        panic(fmt.Sprintf("ç´¢å¼•è¶Šç•Œ: %d (é•¿åº¦: %d)", index, len(arr)))
    }
    return arr[index]
}

func main() {
    // é€šå¸¸åº”è¯¥ä½¿ç”¨é”™è¯¯å¤„ç†è€Œä¸æ˜¯panic
    result, err := safeDivide(10, 0)
    if err != nil {
        fmt.Println("é”™è¯¯:", err)
        return
    }
    fmt.Println(result)
}

// æ›´å¥½çš„åšæ³•ï¼šä½¿ç”¨é”™è¯¯å¤„ç†
func safeDivide(a, b int) (int, error) {
    if b == 0 {
        return 0, fmt.Errorf("é™¤æ•°ä¸èƒ½ä¸º0")
    }
    return a / b, nil
}
```

---

### 4.2 Recover

`recover` ç”¨äºæ•è· `panic`ï¼Œé˜²æ­¢ç¨‹åºå´©æºƒã€‚

#### åŸºæœ¬ä½¿ç”¨

```go
package main

import "fmt"

func mayPanic() {
    panic("å‘ç”Ÿäº†panicï¼")
}

func main() {
    // ä½¿ç”¨defer + recoveræ•è·panic
    defer func() {
        if r := recover(); r != nil {
            fmt.Printf("æ•è·åˆ°panic: %v\n", r)
        }
    }()
    
    mayPanic()
    fmt.Println("è¿™è¡Œä¸ä¼šæ‰§è¡Œ")
}

// è¾“å‡ºï¼š
// æ•è·åˆ°panic: å‘ç”Ÿäº†panicï¼
```

#### å®é™…åº”ç”¨ï¼šHTTPæœåŠ¡å™¨

```go
package main

import (
    "fmt"
    "net/http"
)

func handler(w http.ResponseWriter, r *http.Request) {
    // æ¯ä¸ªè¯·æ±‚éƒ½æœ‰ç‹¬ç«‹çš„recover
    defer func() {
        if r := recover(); r != nil {
            fmt.Printf("å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿpanic: %v\n", r)
            http.Error(w, "å†…éƒ¨æœåŠ¡å™¨é”™è¯¯", http.StatusInternalServerError)
        }
    }()
    
    // å¯èƒ½å‘ç”Ÿpanicçš„ä»£ç 
    panic("æ¨¡æ‹Ÿé”™è¯¯")
}

func main() {
    http.HandleFunc("/", handler)
    http.ListenAndServe(":8080", nil)
}
```

#### Recoverçš„æ³¨æ„äº‹é¡¹

```go
package main

import "fmt"

func example1() {
    defer func() {
        if r := recover(); r != nil {
            fmt.Println("æ•è·åˆ°:", r)
        }
    }()
    
    panic("test")
}

func example2() {
    // âŒ recoverå¿…é¡»åœ¨deferå‡½æ•°ä¸­è°ƒç”¨
    // r := recover()  // è¿™æ ·ä¸ä¼šå·¥ä½œ
    
    defer func() {
        r := recover()  // âœ… è¿™æ ·æ‰æœ‰æ•ˆ
        if r != nil {
            fmt.Println("æ•è·åˆ°:", r)
        }
    }()
    
    panic("test")
}

func example3() {
    // recoveråªèƒ½æ•è·å½“å‰goroutineçš„panic
    go func() {
        panic("è¿™ä¸ªpanicæ— æ³•è¢«æ•è·")
    }()
    
    // éœ€è¦ç­‰å¾…ä¸€ä¸‹
    time.Sleep(100 * time.Millisecond)
}

func example4() {
    // æ¯ä¸ªgoroutineéœ€è¦è‡ªå·±çš„recover
    go func() {
        defer func() {
            if r := recover(); r != nil {
                fmt.Println("goroutineä¸­æ•è·:", r)
            }
        }()
        panic("goroutine panic")
    }()
    
    time.Sleep(100 * time.Millisecond)
}
```

---

### 4.3 Panic vs Error

#### ä½•æ—¶ä½¿ç”¨Errorï¼Œä½•æ—¶ä½¿ç”¨Panic

| åœºæ™¯ | ä½¿ç”¨ | åŸå›  |
|------|------|------|
| æ–‡ä»¶ä¸å­˜åœ¨ | Error | å¯é¢„æœŸçš„é”™è¯¯ï¼Œå¯ä»¥å¤„ç† |
| ç½‘ç»œè¶…æ—¶ | Error | å¯é¢„æœŸçš„é”™è¯¯ï¼Œå¯ä»¥é‡è¯• |
| é™¤é›¶æ“ä½œ | Error | å¯ä»¥é€šè¿‡æ£€æŸ¥é¿å… |
| æ•°ç»„è¶Šç•Œ | Panic | ç¼–ç¨‹é”™è¯¯ï¼Œåº”è¯¥ä¿®å¤ä»£ç  |
| ç©ºæŒ‡é’ˆè§£å¼•ç”¨ | Panic | ç¼–ç¨‹é”™è¯¯ï¼Œåº”è¯¥ä¿®å¤ä»£ç  |
| é…ç½®ç¼ºå¤± | Panic | ç¨‹åºæ— æ³•ç»§ç»­è¿è¡Œ |
| å†…å­˜ä¸è¶³ | Panic | ç³»ç»Ÿçº§é”™è¯¯ï¼Œæ— æ³•æ¢å¤ |

#### æœ€ä½³å®è·µ

```go
package main

import (
    "errors"
    "fmt"
)

// âœ… ä½¿ç”¨é”™è¯¯å¤„ç†å¯é¢„æœŸçš„é”™è¯¯
func readConfig(filename string) (string, error) {
    if filename == "" {
        return "", errors.New("æ–‡ä»¶åä¸èƒ½ä¸ºç©º")
    }
    // è¯»å–é…ç½®...
    return "config", nil
}

// âœ… ä½¿ç”¨panicå¤„ç†ä¸å¯æ¢å¤çš„é”™è¯¯
func mustReadConfig(filename string) string {
    config, err := readConfig(filename)
    if err != nil {
        panic(fmt.Sprintf("é…ç½®è¯»å–å¤±è´¥ï¼Œç¨‹åºæ— æ³•ç»§ç»­: %v", err))
    }
    return config
}

// âœ… åœ¨åº“ä¸­è¿”å›é”™è¯¯ï¼Œè®©è°ƒç”¨è€…å†³å®š
func libraryFunction() error {
    // åº“å‡½æ•°åº”è¯¥è¿”å›é”™è¯¯ï¼Œè€Œä¸æ˜¯panic
    return errors.New("åº“å‡½æ•°é”™è¯¯")
}

// âœ… åœ¨mainæˆ–initä¸­ä½¿ç”¨panic
func init() {
    if !checkCriticalConfig() {
        panic("å…³é”®é…ç½®ç¼ºå¤±")
    }
}
```

---

## äº”ã€ç»¼åˆç¤ºä¾‹

### 5.1 å®Œæ•´çš„é”™è¯¯å¤„ç†ç¤ºä¾‹

```go
package main

import (
    "errors"
    "fmt"
    "os"
    "time"
)

// è‡ªå®šä¹‰é”™è¯¯ç±»å‹
type FileError struct {
    Op      string
    Path    string
    Err     error
    Time    time.Time
}

func (e *FileError) Error() string {
    return fmt.Sprintf("æ–‡ä»¶æ“ä½œå¤±è´¥ [%s] %s: %v (æ—¶é—´: %v)", 
        e.Op, e.Path, e.Err, e.Time)
}

func (e *FileError) Unwrap() error {
    return e.Err
}

// æ–‡ä»¶æ“ä½œå‡½æ•°
func readFile(path string) ([]byte, error) {
    data, err := os.ReadFile(path)
    if err != nil {
        return nil, &FileError{
            Op:   "read",
            Path: path,
            Err:  err,
            Time: time.Now(),
        }
    }
    return data, nil
}

func writeFile(path string, data []byte) error {
    err := os.WriteFile(path, data, 0644)
    if err != nil {
        return &FileError{
            Op:   "write",
            Path: path,
            Err:  err,
            Time: time.Now(),
        }
    }
    return nil
}

// å¤„ç†æ–‡ä»¶
func processFile(inputPath, outputPath string) error {
    // è¯»å–æ–‡ä»¶
    data, err := readFile(inputPath)
    if err != nil {
        return fmt.Errorf("è¯»å–è¾“å…¥æ–‡ä»¶å¤±è´¥: %w", err)
    }
    
    // å¤„ç†æ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰
    processedData := append(data, []byte("\nå¤„ç†å®Œæˆ")...)
    
    // å†™å…¥æ–‡ä»¶
    err = writeFile(outputPath, processedData)
    if err != nil {
        return fmt.Errorf("å†™å…¥è¾“å‡ºæ–‡ä»¶å¤±è´¥: %w", err)
    }
    
    return nil
}

func main() {
    err := processFile("input.txt", "output.txt")
    if err != nil {
        fmt.Printf("å¤„ç†æ–‡ä»¶å¤±è´¥: %v\n", err)
        
        // æ£€æŸ¥åº•å±‚é”™è¯¯
        var fileErr *FileError
        if errors.As(err, &fileErr) {
            fmt.Printf("æ“ä½œ: %s, è·¯å¾„: %s\n", fileErr.Op, fileErr.Path)
        }
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯æ–‡ä»¶ä¸å­˜åœ¨
        if errors.Is(err, os.ErrNotExist) {
            fmt.Println("æ–‡ä»¶ä¸å­˜åœ¨")
        }
        
        os.Exit(1)
    }
    
    fmt.Println("å¤„ç†æˆåŠŸ")
}
```

### 5.2 åŒ…ç®¡ç†ç¤ºä¾‹

```go
// é¡¹ç›®ç»“æ„
// myproject/
//   â”œâ”€â”€ go.mod
//   â”œâ”€â”€ main.go
//   â”œâ”€â”€ config/
//   â”‚   â””â”€â”€ config.go
//   â”œâ”€â”€ models/
//   â”‚   â””â”€â”€ user.go
//   â””â”€â”€ utils/
//       â””â”€â”€ helper.go

// go.mod
module github.com/user/myproject

go 1.21

require (
    github.com/gin-gonic/gin v1.9.1
)

// config/config.go
package config

import "os"

type Config struct {
    Port     string
    Database string
}

func Load() (*Config, error) {
    port := os.Getenv("PORT")
    if port == "" {
        port = "8080"
    }
    
    db := os.Getenv("DATABASE")
    if db == "" {
        return nil, fmt.Errorf("DATABASEç¯å¢ƒå˜é‡æœªè®¾ç½®")
    }
    
    return &Config{
        Port:     port,
        Database: db,
    }, nil
}

// models/user.go
package models

type User struct {
    ID   int
    Name string
}

func (u *User) Validate() error {
    if u.Name == "" {
        return fmt.Errorf("ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    }
    return nil
}

// utils/helper.go
package utils

import "fmt"

func FormatError(err error) string {
    return fmt.Sprintf("é”™è¯¯: %v", err)
}

// main.go
package main

import (
    "fmt"
    "github.com/user/myproject/config"
    "github.com/user/myproject/models"
    "github.com/user/myproject/utils"
)

func main() {
    // åŠ è½½é…ç½®
    cfg, err := config.Load()
    if err != nil {
        fmt.Println(utils.FormatError(err))
        return
    }
    
    // åˆ›å»ºç”¨æˆ·
    user := &models.User{
        ID:   1,
        Name: "Alice",
    }
    
    if err := user.Validate(); err != nil {
        fmt.Println(utils.FormatError(err))
        return
    }
    
    fmt.Printf("é…ç½®: %+v\n", cfg)
    fmt.Printf("ç”¨æˆ·: %+v\n", user)
}
```

---

## å…­ã€Go å‘½ä»¤è¡Œå·¥å…·

### 6.1 å¸¸ç”¨å‘½ä»¤æ¦‚è§ˆ

Go è¯­è¨€æä¾›äº†ä¸°å¯Œçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºå¼€å‘ã€æµ‹è¯•ã€æ„å»ºå’Œéƒ¨ç½²ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„Goå‘½ä»¤ï¼š

| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `go run` | ç¼–è¯‘å¹¶è¿è¡ŒGoç¨‹åº | `go run main.go` |
| `go build` | ç¼–è¯‘Goç¨‹åº | `go build` |
| `go mod` | æ¨¡å—ç®¡ç† | `go mod init` |
| `go get` | ä¸‹è½½å’Œç®¡ç†ä¾èµ– | `go get github.com/gin-gonic/gin` |
| `go test` | è¿è¡Œæµ‹è¯• | `go test` |
| `go fmt` | æ ¼å¼åŒ–ä»£ç  | `go fmt` |
| `go vet` | é™æ€åˆ†æä»£ç  | `go vet` |
| `go doc` | æŸ¥çœ‹æ–‡æ¡£ | `go doc fmt.Println` |

### 6.2 é¡¹ç›®ç®¡ç†å‘½ä»¤

#### go modï¼šæ¨¡å—ç®¡ç†

```bash
# åˆå§‹åŒ–æ¨¡å—
go mod init myproject

# æ·»åŠ ä¾èµ–
go get github.com/gin-gonic/gin

# æ›´æ–°ä¾èµ–åˆ°æœ€æ–°ç‰ˆæœ¬
go get -u github.com/gin-gonic/gin

# æ›´æ–°æ‰€æœ‰ä¾èµ–
go get -u ./...

# æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ–
go mod tidy

# ä¸‹è½½ä¾èµ–
go mod download

# éªŒè¯ä¾èµ–
go mod verify

# æ˜¾ç¤ºæ¨¡å—ä¿¡æ¯
go mod graph
```

#### go runï¼šç¼–è¯‘è¿è¡Œ

```bash
# è¿è¡Œå•ä¸ªæ–‡ä»¶
go run main.go

# è¿è¡Œå¤šä¸ªæ–‡ä»¶
go run main.go utils.go

# è¿è¡Œæ•´ä¸ªåŒ…
go run .
```

#### go buildï¼šç¼–è¯‘æ„å»º

```bash
# ç¼–è¯‘å½“å‰åŒ…
go build

# ç¼–è¯‘ä¸ºæŒ‡å®šæ–‡ä»¶å
go build -o myapp

# äº¤å‰ç¼–è¯‘ï¼ˆç¼–è¯‘ä¸ºLinux amd64ï¼‰
GOOS=linux GOARCH=amd64 go build -o myapp-linux

# ç¼–è¯‘ä¸ºWindows
GOOS=windows GOARCH=amd64 go build -o myapp.exe

# æ˜¾ç¤ºç¼–è¯‘è¯¦ç»†ä¿¡æ¯
go build -v

# åŒ…å«è°ƒè¯•ä¿¡æ¯
go build -ldflags "-s -w"
```

### 6.3 ä»£ç è´¨é‡å·¥å…·

#### go fmtï¼šä»£ç æ ¼å¼åŒ–

```bash
# æ ¼å¼åŒ–å½“å‰ç›®å½•
go fmt

# æ ¼å¼åŒ–æŒ‡å®šæ–‡ä»¶
go fmt main.go

# æ ¼å¼åŒ–æ•´ä¸ªé¡¹ç›®
go fmt ./...

# æ˜¾ç¤ºæ ¼å¼åŒ–çš„å·®å¼‚
go fmt -d .
```

#### go vetï¼šé™æ€åˆ†æ

```bash
# åˆ†æå½“å‰åŒ…
go vet

# åˆ†ææ‰€æœ‰å­åŒ…
go vet ./...

# åˆ†æç‰¹å®šåŒ…
go vet github.com/myuser/myproject
```

`go vet` å¯ä»¥æ£€æµ‹ï¼š
- å¯èƒ½çš„bug
- å¯ç–‘çš„æ„é€ 
- ä¸å¯è¾¾çš„ä»£ç 
- é”™è¯¯çš„æ ¼å¼å­—ç¬¦ä¸²ç­‰

### 6.4 æµ‹è¯•å‘½ä»¤

#### go testï¼šè¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œå½“å‰åŒ…çš„æµ‹è¯•
go test

# è¿è¡Œæ‰€æœ‰å­åŒ…çš„æµ‹è¯•
go test ./...

# è¿è¡Œè¯¦ç»†æ¨¡å¼
go test -v

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
go test -cover

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
go test -coverprofile=coverage.out
go tool cover -html=coverage.out

# è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -bench=.

# è¿è¡Œç«æ€æ£€æµ‹
go test -race

# è¿è¡Œç‰¹å®šæµ‹è¯•
go test -run TestName

# è¿è¡Œæ¨¡ç³Šæµ‹è¯•ï¼ˆGo 1.18+ï¼‰
go test -fuzz=FuzzTestName
```

### 6.5 æ–‡æ¡£å’Œå¸®åŠ©

#### go docï¼šæŸ¥çœ‹æ–‡æ¡£

```bash
# æŸ¥çœ‹åŒ…çš„æ–‡æ¡£
go doc fmt

# æŸ¥çœ‹å‡½æ•°çš„æ–‡æ¡£
go doc fmt.Println

# æŸ¥çœ‹æ–¹æ³•çš„æ–‡æ¡£
go doc strings.Builder.WriteString

# å¯åŠ¨æœ¬åœ°æ–‡æ¡£æœåŠ¡å™¨
go doc -http=:6060
```

#### go helpï¼šè·å–å¸®åŠ©

```bash
# è·å–å‘½ä»¤å¸®åŠ©
go help build
go help test
go help mod

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
go help
```

### 6.6 é«˜çº§å‘½ä»¤

#### go generateï¼šä»£ç ç”Ÿæˆ

```bash
# è¿è¡Œä»£ç ç”Ÿæˆ
go generate

# ç”Ÿæˆç‰¹å®šæ–‡ä»¶
go generate main.go
```

#### go installï¼šå®‰è£…å·¥å…·

```bash
# å®‰è£…å·¥å…·åˆ° $GOPATH/bin
go install github.com/cosmtrek/air@latest

# å®‰è£…å½“å‰é¡¹ç›®çš„å·¥å…·
go install .
```

#### go envï¼šç¯å¢ƒä¿¡æ¯

```bash
# æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡
go env

# æŸ¥çœ‹ç‰¹å®šç¯å¢ƒå˜é‡
go env GOPATH
go env GOROOT
go env GOOS
go env GOARCH
```

### 6.7 æ„å»ºæ ‡ç­¾ï¼ˆBuild Tagsï¼‰

```go
// +build linux darwin

package main

import "fmt"

func main() {
    fmt.Println("This code only compiles on Linux or macOS")
}
```

```bash
# åªåœ¨Linuxä¸Šæ„å»º
go build -tags linux

# åœ¨Linuxå’ŒmacOSä¸Šæ„å»º
go build -tags "linux darwin"
```

### 6.8 å¼€å‘å·¥ä½œæµ

#### å…¸å‹å¼€å‘å·¥ä½œæµ

```bash
# 1. åˆå§‹åŒ–é¡¹ç›®
go mod init myproject

# 2. æ·»åŠ ä¾èµ–
go get github.com/gin-gonic/gin

# 3. å¼€å‘ä»£ç 
# ç¼–è¾‘ main.go...

# 4. æ ¼å¼åŒ–ä»£ç 
go fmt

# 5. é™æ€åˆ†æ
go vet

# 6. è¿è¡Œç¨‹åº
go run main.go

# 7. è¿è¡Œæµ‹è¯•
go test -v

# 8. æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶
go build -o myapp

# 9. æ¸…ç†ä¾èµ–
go mod tidy
```

#### çƒ­é‡è½½å¼€å‘

ä½¿ç”¨ air è¿›è¡Œçƒ­é‡è½½å¼€å‘ï¼š

```bash
# å®‰è£… air
go install github.com/cosmtrek/air@latest

# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .air.toml
# ç„¶åè¿è¡Œ
air
```

### 6.9 æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜è§£å†³

```bash
# æ¸…ç†ç¼“å­˜
go clean -cache
go clean -modcache

# é‡æ–°ä¸‹è½½ä¾èµ–
go mod download

# æŸ¥çœ‹ä¾èµ–å›¾
go mod graph

# è§£å†³æ¨¡å—ç‰ˆæœ¬å†²çª
go mod edit -replace=old=old@v1.0.0
go mod tidy

# æŸ¥çœ‹ç¼–è¯‘è¯¦ç»†ä¿¡æ¯
go build -x
```

### 6.10 æ€§èƒ½åˆ†æ

```bash
# CPUæ€§èƒ½åˆ†æ
go test -bench=. -cpuprofile=cpu.prof
go tool pprof cpu.prof

# å†…å­˜æ€§èƒ½åˆ†æ
go test -bench=. -memprofile=mem.prof
go tool pprof mem.prof

# é˜»å¡åˆ†æ
go test -bench=. -blockprofile=block.prof
go tool pprof block.prof
```

### 6.11 ç»¼åˆç¤ºä¾‹

åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å¼€å‘è„šæœ¬ï¼š

**scripts/dev.sh**:
```bash
#!/bin/bash

# å¼€å‘è„šæœ¬

echo "ğŸš€ Starting development workflow..."

# æ ¼å¼åŒ–ä»£ç 
echo "ğŸ“ Formatting code..."
go fmt ./...

# é™æ€åˆ†æ
echo "ğŸ” Running static analysis..."
go vet ./...

# è¿è¡Œæµ‹è¯•
echo "ğŸ§ª Running tests..."
go test -v ./...

# æ„å»º
echo "ğŸ”¨ Building..."
go build -o bin/myapp

echo "âœ… Development workflow completed!"
```

**Makefile**:
```makefile
.PHONY: build test clean fmt vet run dev

build:
	go build -o bin/myapp

test:
	go test -v ./...

clean:
	go clean
	rm -rf bin/

fmt:
	go fmt ./...

vet:
	go vet ./...

run:
	go run main.go

dev: fmt vet test build
	@echo "Development workflow completed!"
```

---

## æ€»ç»“

### åŒ…ç®¡ç†ï¼ˆPackageï¼‰

1. **åŒ…çš„åŸºæœ¬æ¦‚å¿µ**ï¼š
   - åŒ…æ˜¯ä»£ç ç»„ç»‡å’Œå¤ç”¨çš„åŸºæœ¬å•ä½
   - `package main` è¡¨ç¤ºå¯æ‰§è¡Œç¨‹åº
   - åŒ…åé€šå¸¸ä¸ç›®å½•åç›¸åŒ

2. **å¯è§æ€§è§„åˆ™**ï¼š
   - é¦–å­—æ¯å¤§å†™ï¼šå¯å¯¼å‡ºï¼ˆExportedï¼‰
   - é¦–å­—æ¯å°å†™ï¼šä¸å¯å¯¼å‡ºï¼ˆUnexportedï¼‰

3. **å¯¼å…¥æœºåˆ¶**ï¼š
   - æ”¯æŒæ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹åº“ã€æœ¬åœ°åŒ…
   - æ”¯æŒåˆ«åå¯¼å…¥ã€åŒ¿åå¯¼å…¥
   - `init` å‡½æ•°åœ¨åŒ…å¯¼å…¥æ—¶è‡ªåŠ¨æ‰§è¡Œ

4. **Go Modules**ï¼š
   - å®˜æ–¹ä¾èµ–ç®¡ç†å·¥å…·
   - ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬
   - æ”¯æŒä»£ç†å’Œç§æœ‰ä»“åº“

### é”™è¯¯å¤„ç†ï¼ˆError Handlingï¼‰

1. **é”™è¯¯æ˜¯å€¼**ï¼šGoå°†é”™è¯¯è§†ä¸ºå€¼ï¼Œè€Œä¸æ˜¯å¼‚å¸¸

2. **é”™è¯¯å¤„ç†æ¨¡å¼**ï¼š
   - æ£€æŸ¥å¹¶è¿”å›é”™è¯¯
   - ä½¿ç”¨é”™è¯¯åŒ…è£…ä¿ç•™ä¸Šä¸‹æ–‡
   - ä½¿ç”¨ `errors.Is` å’Œ `errors.As` æ£€æŸ¥é”™è¯¯

3. **è‡ªå®šä¹‰é”™è¯¯ç±»å‹**ï¼š
   - å®ç° `error` æ¥å£
   - æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯
   - æ”¯æŒé”™è¯¯é“¾

4. **æœ€ä½³å®è·µ**ï¼š
   - åŠæ—¶å¤„ç†é”™è¯¯ï¼Œä¸è¦å¿½ç•¥
   - æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯
   - ä½¿ç”¨é”™è¯¯åŒ…è£…ä¿ç•™ä¸Šä¸‹æ–‡
   - åº“å‡½æ•°è¿”å›é”™è¯¯ï¼Œè®©è°ƒç”¨è€…å†³å®š

### Panic å’Œ Recover

1. **Panic**ï¼š
   - ç”¨äºä¸å¯æ¢å¤çš„é”™è¯¯
   - ä¼šå¯¼è‡´ç¨‹åºå´©æºƒ
   - åº”è¯¥è°¨æ…ä½¿ç”¨

2. **Recover**ï¼š
   - ç”¨äºæ•è·panic
   - å¿…é¡»åœ¨deferå‡½æ•°ä¸­è°ƒç”¨
   - åªèƒ½æ•è·å½“å‰goroutineçš„panic

3. **ä½¿ç”¨åŸåˆ™**ï¼š
   - å¯é¢„æœŸçš„é”™è¯¯ä½¿ç”¨Error
   - ç¼–ç¨‹é”™è¯¯æˆ–ä¸å¯æ¢å¤çš„é”™è¯¯ä½¿ç”¨Panic
   - åº“å‡½æ•°åº”è¯¥è¿”å›é”™è¯¯ï¼Œè€Œä¸æ˜¯panic

### æœ€ä½³å®è·µ

1. **åŒ…è®¾è®¡**ï¼š
   - åŒ…åç®€æ´æ˜äº†
   - åˆç†ç»„ç»‡ä»£ç ç»“æ„
   - ä½¿ç”¨å†…éƒ¨åŒ…ä¿æŠ¤å®ç°ç»†èŠ‚

2. **é”™è¯¯å¤„ç†**ï¼š
   - å§‹ç»ˆæ£€æŸ¥é”™è¯¯
   - æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯
   - ä½¿ç”¨é”™è¯¯åŒ…è£…ä¿ç•™ä¸Šä¸‹æ–‡
   - åŒºåˆ†å¯æ¢å¤å’Œä¸å¯æ¢å¤çš„é”™è¯¯

3. **ä¾èµ–ç®¡ç†**ï¼š
   - ä½¿ç”¨Go Modulesç®¡ç†ä¾èµ–
   - å®šæœŸæ›´æ–°ä¾èµ–
   - ä½¿ç”¨ `go mod tidy` æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ–

4. **ä»£ç ç»„ç»‡**ï¼š
   - æŒ‰åŠŸèƒ½ç»„ç»‡åŒ…
   - ä¿æŒåŒ…çš„èŒè´£å•ä¸€
   - åˆç†ä½¿ç”¨å¯è§æ€§è§„åˆ™

æŒæ¡åŒ…ç®¡ç†å’Œé”™è¯¯å¤„ç†æ˜¯ç¼–å†™é«˜è´¨é‡Goä»£ç çš„åŸºç¡€ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¦ç‰¹åˆ«æ³¨æ„ï¼š
- åˆç†ç»„ç»‡ä»£ç ç»“æ„ï¼Œä½¿ç”¨åŒ…è¿›è¡Œæ¨¡å—åŒ–
- å§‹ç»ˆå¤„ç†é”™è¯¯ï¼Œä¸è¦å¿½ç•¥
- åŒºåˆ†panicå’Œerrorçš„ä½¿ç”¨åœºæ™¯
- ä½¿ç”¨Go Modulesç®¡ç†ä¾èµ–ï¼Œä¿æŒä¾èµ–çš„æ›´æ–°å’Œç»´æŠ¤
