---
title: 子网掩码和CIDR
date: 2026-01-12
description: 深入理解子网掩码和CIDR表示法，掌握网络划分技术
---

# 子网掩码和CIDR

## 一、什么是子网掩码

### 1 什么是子网掩码

#### 1.1 子网掩码的基本概念

**子网掩码（Subnet Mask）**是用来区分IP地址中哪部分是网络地址，哪部分是主机地址的32位二进制数。

**形象比喻**：
- 把IP地址比作一个完整的地址：`192.168.1.100`
- 网络地址就像"城市+街道"：`192.168.1`
- 主机地址就像"门牌号"：`100`
- 子网掩码就像"地址格式说明"，告诉你哪些部分是"城市+街道"，哪些部分是"门牌号"

#### 1.2 子网掩码的工作原理

子网掩码由连续的1和连续的0组成：
- **1的部分**：对应IP地址中的网络位（标识网络）
- **0的部分**：对应IP地址中的主机位（标识主机）

**示例：`192.168.1.100` 与子网掩码 `255.255.255.0`**

```
IP地址：     192.168.1.100
二进制：     11000000.10101000.00000001.01100100

子网掩码：   255.255.255.0
二进制：     11111111.11111111.11111111.00000000
             └─────────网络位─────────┘└─主机位─┘

网络地址：   192.168.1.0   (前24位)
主机地址：   100           (后8位)
```

**计算过程**：
1. 将IP地址和子网掩码都转换为二进制
2. 进行"按位与"（AND）运算
3. 结果就是网络地址

```
   11000000.10101000.00000001.01100100  (IP地址)
AND 11111111.11111111.11111111.00000000  (子网掩码)
─────────────────────────────────────────
   11000000.10101000.00000001.00000000  (网络地址)
   192.168.1.0
```

#### 1.3 子网掩码的作用

1. **确定网络范围**：告诉设备哪些IP地址属于同一个网络
2. **路由决策**：帮助路由器判断数据包应该发送到哪个网络
3. **网络隔离**：不同子网的设备需要路由器才能通信
4. **地址规划**：帮助网络管理员合理规划IP地址分配

#### 1.4 常见子网掩码示例

| 子网掩码 | 二进制表示 | 说明 |
|---------|-----------|------|
| 255.0.0.0 | 11111111.00000000.00000000.00000000 | 前8位是网络位，可容纳约1677万台主机 |
| 255.255.0.0 | 11111111.11111111.00000000.00000000 | 前16位是网络位，可容纳约6.5万台主机 |
| 255.255.255.0 | 11111111.11111111.11111111.00000000 | 前24位是网络位，可容纳254台主机（最常用） |
| 255.255.255.128 | 11111111.11111111.11111111.10000000 | 前25位是网络位，可容纳126台主机 |
| 255.255.255.192 | 11111111.11111111.11111111.11000000 | 前26位是网络位，可容纳62台主机 |

**记忆技巧**：
- `255` = `11111111`（8个1）= 全部是网络位
- `0` = `00000000`（8个0）= 全部是主机位
- `128` = `10000000`（1个1，7个0）= 1位网络位，7位主机位

### 2 CIDR表示法

CIDR（Classless Inter-Domain Routing，无类别域间路由）是一种更灵活的IP地址分配方法，使用斜杠表示法：

```
192.168.1.0/24
```

**含义**：
- `192.168.1.0`：网络地址
- `/24`：表示前24位是网络位，后8位是主机位
- 子网掩码：`255.255.255.0`

**CIDR与子网掩码的对应关系**：
- `/8` = `255.0.0.0`（前8位是网络位）
- `/16` = `255.255.0.0`（前16位是网络位）
- `/24` = `255.255.255.0`（前24位是网络位）
- `/25` = `255.255.255.128`（前25位是网络位）
- `/26` = `255.255.255.192`（前26位是网络位）

### 3 常见子网掩码对照表

| CIDR | 子网掩码 | 二进制表示 | 可用主机数 | 说明 |
|------|----------|-----------|-----------|------|
| /8 | 255.0.0.0 | 11111111.00000000.00000000.00000000 | 16,777,214 | A类网络 |
| /16 | 255.255.0.0 | 11111111.11111111.00000000.00000000 | 65,534 | B类网络 |
| /24 | 255.255.255.0 | 11111111.11111111.11111111.00000000 | 254 | C类网络（最常用） |
| /25 | 255.255.255.128 | 11111111.11111111.11111111.10000000 | 126 | 子网划分 |
| /26 | 255.255.255.192 | 11111111.11111111.11111111.11000000 | 62 | 子网划分 |
| /28 | 255.255.255.240 | 11111111.11111111.11111111.11110000 | 14 | 子网划分 |
| /30 | 255.255.255.252 | 11111111.11111111.11111111.11111100 | 2 | 点对点连接 |

**注意**：可用主机数 = 2^(主机位数) - 2
- 减去2是因为：网络地址（全0）和广播地址（全1）不能分配给主机
- 例如：/24 有 8 位主机位，2^8 - 2 = 256 - 2 = 254 个可用地址

### 4 子网划分示例

假设有一个 `192.168.1.0/24` 的网络，需要划分成4个子网：

**原始网络**：
```
网络地址：192.168.1.0/24
子网掩码：255.255.255.0
IP范围：192.168.1.0 ~ 192.168.1.255
可用地址：192.168.1.1 ~ 192.168.1.254（254个）
```

**划分成4个子网**（需要借用2位主机位作为网络位，从/24变成/26）：

```
子网1：192.168.1.0/26
  子网掩码：255.255.255.192
  网络地址：192.168.1.0
  广播地址：192.168.1.63
  可用地址：192.168.1.1 ~ 192.168.1.62（62个）
  用途：部门A

子网2：192.168.1.64/26
  子网掩码：255.255.255.192
  网络地址：192.168.1.64
  广播地址：192.168.1.127
  可用地址：192.168.1.65 ~ 192.168.1.126（62个）
  用途：部门B

子网3：192.168.1.128/26
  子网掩码：255.255.255.192
  网络地址：192.168.1.128
  广播地址：192.168.1.191
  可用地址：192.168.1.129 ~ 192.168.1.190（62个）
  用途：部门C

子网4：192.168.1.192/26
  子网掩码：255.255.255.192
  网络地址：192.168.1.192
  广播地址：192.168.1.255
  可用地址：192.168.1.193 ~ 192.168.1.254（62个）
  用途：部门D
```

**划分原理**：
- 原始网络有8位主机位（/24）
- 需要4个子网，需要2位来标识子网（2^2 = 4）
- 新的子网掩码是/26（24位网络位 + 2位子网位 = 26位）
- 每个子网剩余6位主机位，可容纳 2^6 - 2 = 62 台主机

#### 4.1 子网掩码的实际应用场景

**场景1：判断两台设备是否在同一网络**

```
设备A：192.168.1.100，子网掩码 255.255.255.0
设备B：192.168.1.200，子网掩码 255.255.255.0

计算网络地址：
设备A：192.168.1.100 AND 255.255.255.0 = 192.168.1.0
设备B：192.168.1.200 AND 255.255.255.0 = 192.168.1.0

结果：网络地址相同（192.168.1.0），两台设备在同一网络，可以直接通信
```

```
设备A：192.168.1.100，子网掩码 255.255.255.192（/26）
设备B：192.168.1.200，子网掩码 255.255.255.192（/26）

计算网络地址：
设备A：192.168.1.100 AND 255.255.255.192 = 192.168.1.64
设备B：192.168.1.200 AND 255.255.255.192 = 192.168.1.192

结果：网络地址不同，两台设备在不同子网，需要通过路由器通信
```

**场景2：理解为什么需要子网掩码**

没有子网掩码，设备无法知道：
- `192.168.1.100` 和 `192.168.1.200` 是否在同一个网络
- 数据包应该直接发送（同一网络）还是发送给路由器（不同网络）

有了子网掩码 `255.255.255.0`：
- 设备知道前24位是网络地址
- 可以快速判断目标设备是否在同一网络
- 决定数据包的发送方式（直接发送 vs 通过网关）

